const MILLENNIUM_IS_CLIENT_MODULE=!1,pluginName="steam-app-inserter";function InitializePlugins(){var e,a;let t;(e=window.PLUGIN_LIST||(window.PLUGIN_LIST={}))[pluginName]||(e[pluginName]={}),(a=window.MILLENNIUM_PLUGIN_SETTINGS_STORE||(window.MILLENNIUM_PLUGIN_SETTINGS_STORE={}))[pluginName]||(a[pluginName]={}),window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS||(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS={}),function(e){e[e.CallServerMethod=0]="CallServerMethod"}(t||(t={}));let i=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName],n=`Millennium.Internal.IPC.[${pluginName}]`;const o={DropDown:["string","number","boolean"],NumberTextInput:["number"],StringTextInput:["string"],FloatTextInput:["number"],CheckBox:["boolean"],NumberSlider:["number"],FloatSlider:["number"]};i.ignoreProxyFlag=!1;const r=e=>new Proxy(e,{set(e,a,t){if(!(a in e))throw new TypeError(`Property ${String(a)} does not exist on plugin settings`);const r=o[e[a].type],l=e[a]?.range;if(r.includes("number")&&"number"==typeof t&&(l&&(t=function(e,a,t){return Math.max(a,Math.min(t,e))}(t,l[0],l[1])),t||(t=0)),!r.includes(typeof t))throw new TypeError(`Expected ${r.join(" or ")}, got ${typeof t}`);return e[a].value=t,((e,a)=>{i.ignoreProxyFlag||SteamClient.BrowserView.PostMessageToParent(n,JSON.stringify({name:e,value:a}))})(String(a),t),!0},get:(e,a)=>"__raw_get_internals__"===a?e:a in e?e[a].value:void 0});i.DefinePluginSetting=r,i.settingsStore=r({})}InitializePlugins();const __call_server_method__=(e,a)=>Millennium.callServerMethod(pluginName,e,a);function __wrapped_callable__(e){return e.startsWith("webkit:")?MILLENNIUM_API.callable((e,a)=>MILLENNIUM_API.__INTERNAL_CALL_WEBKIT_METHOD__(pluginName,e,a),e.replace(/^webkit:/,"")):MILLENNIUM_API.callable(__call_server_method__,e)}let PluginEntryPointMain=function(){var e=function(e){"use strict";function a(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,i=Array(a);t<a;t++)i[t]=e[t];return i}function t(e,a,t,i,n,o,r){try{var l=e[o](r),s=l.value}catch(e){return void t(e)}l.done?a(s):Promise.resolve(s).then(i,n)}function i(e){return function(){var a=this,i=arguments;return new Promise(function(n,o){var r=e.apply(a,i);function l(e){t(r,n,o,l,s,"next",e)}function s(e){t(r,n,o,l,s,"throw",e)}l(void 0)})}}function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,a,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function l(t,i,n,r){var l=i&&i.prototype instanceof d?i:d,c=Object.create(l.prototype);return o(c,"_invoke",function(t,i,n){var o,r,l,d=0,c=n||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(a,t){return o=a,r=0,l=e,p.n=t,s}};function m(t,i){for(r=t,l=i,a=0;!u&&d&&!n&&a<c.length;a++){var n,o=c[a],m=p.p,f=o[2];t>3?(n=f===i)&&(l=o[(r=o[4])?5:(r=3,3)],o[4]=o[5]=e):o[0]<=m&&((n=t<2&&m<o[1])?(r=0,p.v=i,p.n=o[1]):m<f&&(n=t<3||o[0]>i||i>f)&&(o[4]=t,o[5]=i,p.n=f,r=0))}if(n||t>1)return s;throw u=!0,i}return function(n,c,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===c&&m(c,f),r=c,l=f;(a=r<2?e:l)||!u;){o||(r?r<3?(r>1&&(p.n=-1),m(r,l)):p.n=l:p.v=l);try{if(d=2,o){if(r||(n="next"),a=o[n]){if(!(a=a.call(o,l)))throw TypeError("iterator result is not an object");if(!a.done)return a;l=a.value,r<2&&(r=0)}else 1===r&&(a=o.return)&&a.call(o),r<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),r=1);o=e}else if((a=(u=p.n<0)?l:t.call(i,p))!==s)break}catch(a){o=e,r=1,l=a}finally{d=1}}return{value:a,done:u}}}(t,n,r),!0),c}var s={};function d(){}function c(){}function u(){}a=Object.getPrototypeOf;var p=[][i]?a(a([][i]())):(o(a={},i,function(){return this}),a),m=u.prototype=d.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,o(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=u,o(m,"constructor",u),o(u,"constructor",c),c.displayName="GeneratorFunction",o(u,r,"GeneratorFunction"),o(m),o(m,r,"Generator"),o(m,i,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:f}})()}function o(e,a,t,i){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}o=function(e,a,t,i){function r(a,t){o(e,a,function(e){return this._invoke(a,t,e)})}a?n?n(e,a,{value:t,enumerable:!i,configurable:!i,writable:!i}):e[a]=t:(r("next",0),r("throw",1),r("return",2))},o(e,a,t,i)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var a=function(e){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var t=a.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof a?a:a+""}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var d="en",c={en:{common:{ok:"OK",cancel:"Cancel",removeAllDlc:"Remove all DLC",remove:"Remove",errorWithMessage:"Error: {message}"},buttons:{addToLibrary:"Add to library",editDlcLibrary:"Edit DLC library",removeFromLibrary:"Remove from library",loading:"Loading...",adding:"Adding...",removing:"Removing..."},errors:{manifestMissing:"Manifest not found on public mirrors. Please request manual access.",failedAddSelectedDlc:"Failed to add selected DLC.",failedInstallBaseGame:"Failed to install the base game.",failedFetchInfo:"Failed to fetch game information.",failedRemoveGame:"Failed to remove the game!"},alerts:{addingFailedTitle:"Adding failed",unableAddTitle:"Unable to add game",unableGetDlcTitle:"Unable to get DLC list",unableRemoveTitle:"Unable to remove",noDlcTitle:"No DLC available"},messages:{changesApplied:"Changes applied.",gameAdded:"Game added successfully!",gameRemoved:"Game removed successfully!",noDlcDetails:"This game has no DLC to install."},dialogs:{selectDlc:{title:"Select DLC to add",subtitle:"Select DLC to add. Uncheck any you don't want to add.",selectAll:"Select all DLC",confirm:"Apply selection",alreadyAdded:"already added"},baseInstall:{title:"Add to library",message:"This game has no DLC. Do you want to add it to your library?",confirm:"Add game"},restart:{title:"Restart Steam",message:"{details} Steam needs to restart. Restart now?",confirm:"Restart now",cancel:"Later"},remove:{title:"Remove from library",message:"Are you sure you want to remove this game from your library?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparing files...",downloading:"Downloading manifests...",merging:"Merging DLC selections...",removing:"Removing from library...",success:"All done!",failure:"Operation failed."},mirrors:{title:"Choose download source",default:"Public mirror (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"Manilua API (in development)",maniluaDisabled:"",kernelos:"KernelOS"},auth:{title:"Manilua API Key",instructions:"Enter your Manilua API key. You can obtain it from the Manilua dashboard.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Example: manilua_abc123...",save:"Save",saving:"Saving...",required:"API key is required.",invalid:"API key is invalid. Please try again.",validationFailed:"API key validation failed. Please verify the key and try again.",error:"Validation error"},backend:{manifestAlreadyExists:"Manifest already exists",manifestNotAvailablePublic:"Manifest for {name} ({appid}) is not available on the public mirrors.",manifestNotAvailablePublicNoName:"Manifest for {appid} is not available on the public mirrors.",manifestSavedNoJson:"Manifest saved to {target} (no JSON processing)",manifestSaved:"Manifest saved to {target}",couldNotDetermineAppid:"Could not determine AppID.",manifestNotAvailableManilua:"Manifest for {name} ({appid}) is not available via the Manilua mirror. Please check your API key.",manifestNotAvailableManiluaNoName:"Manifest for {appid} is not available via the Manilua mirror. Please verify your API key.",manifestNotFoundManilua:"Manifest for {name} ({appid}) not found on the Manilua mirror.",manifestNotFoundManiluaNoName:"Manifest for {appid} not found on the Manilua mirror.",apiKeyRejectedManilua:"API key is rejected by the Manilua mirror. Please check your API key.",manifestNotFoundOnMirror:"Manifest for {name} ({appid}) not found on {source} mirror.",couldNotDetermineAppidFromMessage:"Could not determine AppID from message.",maniluaRequiresApiKey:"The Manilua mirror requires a valid API key.",dlcAdded:"Added {count} DLC to {target}.",apiKeyNotConfigured:"API key not configured.",apiKeyRequired:"API key is required.",apiKeyMustStartWith:"API key must start with {prefix}.",apiKeyValidationFailed:"API key validation failed.",apiKeySaved:"API key saved.",unexpectedValidationResponse:"Unexpected response while validating API key.",apiKeyInvalid:"API key is invalid.",apiKeyRejected:"API key was rejected by the Manilua service.",validationRequestFailed:"Validation request failed with HTTP {status}.",validationException:"API key validation failed: {error}",manifestNotAvailableRyuu:"Manifest for {name} ({appid}) is not available via the Ryuu mirror.",manifestNotAvailableRyuuNoName:"Manifest for {appid} is not available via the Ryuu mirror.",manifestNotFoundRyuu:"Manifest for {name} ({appid}) not found on the Ryuu mirror.",manifestNotFoundRyuuNoName:"Manifest for {appid} not found on the Ryuu mirror."},compat:{works:"Works",mayNotWork:"May not work",needsBypass:"Needs bypass",drmDetected:"DRM detected (Denuvo, etc.)",accountRequired:"Requires third-party account",onlineOnly:"Online only",hasOnline:"Has online features"}},es:{common:{ok:"Aceptar",cancel:"Cancelar",removeAllDlc:"Eliminar todos los DLC",remove:"Quitar",errorWithMessage:"Error: {message}"},buttons:{addToLibrary:"Añadir a la biblioteca",editDlcLibrary:"Editar DLC en la biblioteca",removeFromLibrary:"Quitar de la biblioteca",loading:"Cargando...",adding:"Añadiendo...",removing:"Quitando..."},errors:{manifestMissing:"Manifiesto no disponible en los espejos públicos. Solicita acceso manual.",failedAddSelectedDlc:"No se pudieron añadir los DLC seleccionados.",failedInstallBaseGame:"No se pudo instalar el juego base.",failedFetchInfo:"No se pudo obtener la información del juego.",failedRemoveGame:"¡No se pudo quitar el juego!"},alerts:{addingFailedTitle:"Error al añadir",unableAddTitle:"No se puede añadir el juego",unableGetDlcTitle:"No se puede obtener la lista de DLC",unableRemoveTitle:"No se puede quitar",noDlcTitle:"No hay DLC disponibles"},messages:{changesApplied:"Cambios aplicados.",gameAdded:"¡Juego añadido correctamente!",gameRemoved:"¡Juego eliminado correctamente!",noDlcDetails:"Este juego no tiene DLC para instalar."},dialogs:{selectDlc:{title:"Selecciona los DLC que quieres añadir",subtitle:"Selecciona los DLC que quieras añadir. Desmarca los que no necesites.",selectAll:"Seleccionar todos los DLC",confirm:"Aplicar selección",alreadyAdded:"ya añadido"},baseInstall:{title:"Añadir a la biblioteca",message:"Este juego no tiene DLC. ¿Quieres añadirlo a tu biblioteca?",confirm:"Añadir juego"},restart:{title:"Reiniciar Steam",message:"{details} Steam necesita reiniciarse. ¿Reiniciar ahora?",confirm:"Reiniciar ahora",cancel:"Más tarde"},remove:{title:"Quitar de la biblioteca",message:"¿Seguro que quieres quitar este juego de tu biblioteca?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparando archivos...",downloading:"Descargando manifiestos...",merging:"Combinando seleccion de DLC...",removing:"Quitando de la biblioteca...",success:"Listo.",failure:"La operacion fallo."},mirrors:{title:"Elige la fuente de descarga",default:"Espejo público (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API de Manilua (en desarrollo)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API de Manilua (requiere clave)"},auth:{title:"Clave de la API Manilua",instructions:"Introduce tu clave de la API Manilua. Puedes obtenerla en el panel de Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Ejemplo: manilua_abc123...",save:"Guardar",saving:"Guardando...",required:"La clave es obligatoria.",invalid:"La clave no es valida. Intentalo de nuevo.",validationFailed:"La validacion de la clave fallo. Comprueba la clave e intentalo de nuevo.",error:"Error de validacion"},backend:{manifestAlreadyExists:"El manifiesto ya existe",manifestNotAvailablePublic:"El manifiesto para {name} ({appid}) no está disponible en los espejos públicos.",manifestNotAvailablePublicNoName:"El manifiesto para {appid} no está disponible en los espejos públicos.",manifestSavedNoJson:"Manifiesto guardado en {target} (sin procesamiento JSON)",manifestSaved:"Manifiesto guardado en {target}",couldNotDetermineAppid:"No se pudo determinar el AppID.",manifestNotAvailableManilua:"El manifiesto para {name} ({appid}) no está disponible a través del espejo Manilua. Comprueba tu clave API.",manifestNotAvailableManiluaNoName:"El manifiesto para {appid} no está disponible a través del espejo Manilua. Verifica tu clave API.",manifestNotFoundManilua:"El manifiesto para {name} ({appid}) no se encuentra en el espejo Manilua.",manifestNotFoundManiluaNoName:"El manifiesto para {appid} no se encuentra en el espejo Manilua.",apiKeyRejectedManilua:"La clave API ha sido rechazada por el espejo Manilua. Comprueba tu clave API.",manifestNotFoundOnMirror:"El manifiesto para {name} ({appid}) no se encontró en el espejo {source}.",couldNotDetermineAppidFromMessage:"No se pudo determinar el AppID del mensaje.",maniluaRequiresApiKey:"El espejo Manilua requiere una clave API válida.",dlcAdded:"Se añadieron {count} DLC a {target}.",apiKeyNotConfigured:"La clave API no está configurada.",apiKeyRequired:"La clave API es obligatoria.",apiKeyMustStartWith:"La clave API debe comenzar con {prefix}.",apiKeyValidationFailed:"La validación de la clave API falló.",apiKeySaved:"Clave API guardada.",unexpectedValidationResponse:"Respuesta inesperada al validar la clave API.",apiKeyInvalid:"La clave API no es válida.",apiKeyRejected:"La clave API fue rechazada por el servicio Manilua.",validationRequestFailed:"La solicitud de validación falló con HTTP {status}.",validationException:"La validación de la clave API falló: {error}"},compat:{works:"Funciona",mayNotWork:"Puede no funcionar",needsBypass:"Necesita bypass",drmDetected:"DRM detectado (Denuvo, etc.)",accountRequired:"Requiere cuenta de terceros",onlineOnly:"Solo en línea",hasOnline:"Tiene funciones en línea"}},fr:{common:{ok:"OK",cancel:"Annuler",removeAllDlc:"Supprimer tous les DLC",remove:"Retirer",errorWithMessage:"Erreur : {message}"},buttons:{addToLibrary:"Ajouter à la bibliothèque",editDlcLibrary:"Modifier les DLC de la bibliothèque",removeFromLibrary:"Retirer de la bibliothèque",loading:"Chargement...",adding:"Ajout en cours...",removing:"Retrait en cours..."},errors:{manifestMissing:"Manifeste introuvable sur les miroirs publics. Demandez un accès manuel.",failedAddSelectedDlc:"Impossible d'ajouter les DLC sélectionnés.",failedInstallBaseGame:"Impossible d'installer le jeu de base.",failedFetchInfo:"Impossible de récupérer les informations du jeu.",failedRemoveGame:"Impossible de retirer le jeu !"},alerts:{addingFailedTitle:"Échec de l'ajout",unableAddTitle:"Impossible d'ajouter le jeu",unableGetDlcTitle:"Impossible d'obtenir la liste des DLC",unableRemoveTitle:"Impossible de retirer",noDlcTitle:"Aucun DLC disponible"},messages:{changesApplied:"Modifications appliquées.",gameAdded:"Jeu ajouté avec succès !",gameRemoved:"Jeu retiré avec succès !",noDlcDetails:"Ce jeu n'a pas de DLC à installer."},dialogs:{selectDlc:{title:"Sélectionner les DLC à ajouter",subtitle:"Sélectionnez les DLC à ajouter. Décochez ceux que vous ne voulez pas.",selectAll:"Tout sélectionner",confirm:"Appliquer la sélection",alreadyAdded:"déjà ajouté"},baseInstall:{title:"Ajouter à la bibliothèque",message:"Ce jeu n'a aucun DLC. Voulez-vous l'ajouter à votre bibliothèque ?",confirm:"Ajouter le jeu"},restart:{title:"Redémarrer Steam",message:"{details} Steam doit redémarrer. Redémarrer maintenant ?",confirm:"Redémarrer maintenant",cancel:"Plus tard"},remove:{title:"Retirer de la bibliothèque",message:"Êtes-vous sûr de vouloir retirer ce jeu de votre bibliothèque ?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparation des fichiers...",downloading:"Telechargement des manifestes...",merging:"Fusion des selections de DLC...",removing:"Retrait de la bibliotheque...",success:"Termine !",failure:"L'operation a echoue."},mirrors:{title:"Choisissez la source de telechargement",default:"Miroir public (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API Manilua (en cours de developpement)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API Manilua (cle requise)"},auth:{title:"Cle API Manilua",instructions:"Saisissez votre cle API Manilua. Vous pouvez l'obtenir depuis le tableau de bord Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Exemple : manilua_abc123...",save:"Enregistrer",saving:"Enregistrement...",required:"La cle est obligatoire.",invalid:"Cle invalide. Veuillez reessayer.",validationFailed:"La validation de la cle a echoue. Verifiez la cle et reessayez.",error:"Erreur de validation"},backend:{manifestAlreadyExists:"Le manifeste existe déjà",manifestNotAvailablePublic:"Le manifeste pour {name} ({appid}) n'est pas disponible sur les miroirs publics.",manifestNotAvailablePublicNoName:"Le manifeste pour {appid} n'est pas disponible sur les miroirs publics.",manifestSavedNoJson:"Manifeste enregistré dans {target} (sans traitement JSON)",manifestSaved:"Manifeste enregistré dans {target}",couldNotDetermineAppid:"Impossible de déterminer l'AppID.",manifestNotAvailableManilua:"Le manifeste pour {name} ({appid}) n'est pas disponible via le miroir Manilua. Vérifiez votre clé API.",manifestNotAvailableManiluaNoName:"Le manifeste pour {appid} n'est pas disponible via le miroir Manilua. Vérifiez votre clé API.",manifestNotFoundManilua:"Le manifeste pour {name} ({appid}) est introuvable sur le miroir Manilua.",manifestNotFoundManiluaNoName:"Le manifeste pour {appid} est introuvable sur le miroir Manilua.",apiKeyRejectedManilua:"La clé API a été rejetée par le miroir Manilua. Vérifiez votre clé API.",manifestNotFoundOnMirror:"Le manifeste pour {name} ({appid}) introuvable sur le miroir {source}.",couldNotDetermineAppidFromMessage:"Impossible de déterminer l'AppID du message.",maniluaRequiresApiKey:"Le miroir Manilua nécessite une clé API valide.",dlcAdded:"{count} DLC ajoutés à {target}.",apiKeyNotConfigured:"La clé API n'est pas configurée.",apiKeyRequired:"La clé API est obligatoire.",apiKeyMustStartWith:"La clé API doit commencer par {prefix}.",apiKeyValidationFailed:"La validation de la clé API a échoué.",apiKeySaved:"Clé API enregistrée.",unexpectedValidationResponse:"Réponse inattendue lors de la validation de la clé API.",apiKeyInvalid:"La clé API n'est pas valide.",apiKeyRejected:"La clé API a été rejetée par le service Manilua.",validationRequestFailed:"La demande de validation a échoué avec HTTP {status}.",validationException:"La validation de la clé API a échoué : {error}"},compat:{works:"Fonctionne",mayNotWork:"Peut ne pas fonctionner",needsBypass:"Contournement nécessaire",drmDetected:"DRM détecté (Denuvo, etc.)",accountRequired:"Compte tiers requis",onlineOnly:"En ligne uniquement",hasOnline:"Fonctionnalités en ligne"}},"pt-BR":{common:{ok:"OK",cancel:"Cancelar",removeAllDlc:"Remover todos os DLC",remove:"Remover",errorWithMessage:"Erro: {message}"},buttons:{addToLibrary:"Adicionar à biblioteca",editDlcLibrary:"Editar biblioteca de DLC",removeFromLibrary:"Remover da biblioteca",loading:"Carregando...",adding:"Adicionando...",removing:"Removendo..."},errors:{manifestMissing:"Manifesto indisponível nos espelhos públicos. Solicite acesso manual.",failedAddSelectedDlc:"Não foi possível adicionar os DLC selecionados.",failedInstallBaseGame:"Não foi possível instalar o jogo base.",failedFetchInfo:"Não foi possível obter as informações do jogo.",failedRemoveGame:"Não foi possível remover o jogo!"},alerts:{addingFailedTitle:"Falha ao adicionar",unableAddTitle:"Não foi possível adicionar o jogo",unableGetDlcTitle:"Não foi possível obter a lista de DLC",unableRemoveTitle:"Não foi possível remover",noDlcTitle:"Nenhum DLC disponível"},messages:{changesApplied:"Alterações aplicadas.",gameAdded:"Jogo adicionado com sucesso!",gameRemoved:"Jogo removido com sucesso!",noDlcDetails:"Este jogo não possui DLC para instalar."},dialogs:{selectDlc:{title:"Selecione os DLC para adicionar",subtitle:"Selecione os DLC que deseja adicionar. Desmarque os que não quiser.",selectAll:"Selecionar todos os DLC",confirm:"Aplicar seleção",alreadyAdded:"já adicionado"},baseInstall:{title:"Adicionar à biblioteca",message:"Este jogo não possui DLC. Deseja adicioná-lo à sua biblioteca?",confirm:"Adicionar jogo"},restart:{title:"Reiniciar Steam",message:"{details} A Steam precisa reiniciar. Reiniciar agora?",confirm:"Reiniciar agora",cancel:"Depois"},remove:{title:"Remover da biblioteca",message:"Tem certeza de que deseja remover este jogo da sua biblioteca?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparando arquivos...",downloading:"Baixando manifestos...",merging:"Mesclando selecao de DLC...",removing:"Removendo da biblioteca...",success:"Concluido!",failure:"A operacao falhou."},mirrors:{title:"Escolha a fonte de download",default:"Espelho público (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API Manilua (em desenvolvimento)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API Manilua (requer chave)"},auth:{title:"Chave da API Manilua",instructions:"Informe sua chave da API Manilua. Voce pode obtela no painel do Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Exemplo: manilua_abc123...",save:"Salvar",saving:"Salvando...",required:"A chave e obrigatoria.",invalid:"Chave invalida. Tente novamente.",validationFailed:"Falha na validacao da chave. Verifique a chave e tente novamente.",error:"Erro de validacao"},backend:{manifestAlreadyExists:"O manifesto já existe",manifestNotAvailablePublic:"O manifesto para {name} ({appid}) não está disponível nos espelhos públicos.",manifestNotAvailablePublicNoName:"O manifesto para {appid} não está disponível nos espelhos públicos.",manifestSavedNoJson:"Manifesto salvo em {target} (sem processamento JSON)",manifestSaved:"Manifesto salvo em {target}",couldNotDetermineAppid:"Não foi possível determinar o AppID.",manifestNotAvailableManilua:"O manifesto para {name} ({appid}) não está disponível através do espelho Manilua. Verifique sua chave API.",manifestNotAvailableManiluaNoName:"O manifesto para {appid} não está disponível através do espelho Manilua. Verifique sua chave API.",manifestNotFoundManilua:"O manifesto para {name} ({appid}) não foi encontrado no espelho Manilua.",manifestNotFoundManiluaNoName:"O manifesto para {appid} não foi encontrado no espelho Manilua.",apiKeyRejectedManilua:"A chave API foi rejeitada pelo espelho Manilua. Verifique sua chave API.",manifestNotFoundOnMirror:"O manifesto para {name} ({appid}) não foi encontrado no espelho {source}.",couldNotDetermineAppidFromMessage:"Não foi possível determinar o AppID da mensagem.",maniluaRequiresApiKey:"O espelho Manilua requer uma chave API válida.",dlcAdded:"{count} DLC adicionados a {target}.",apiKeyNotConfigured:"A chave API não está configurada.",apiKeyRequired:"A chave API é obrigatória.",apiKeyMustStartWith:"A chave API deve começar com {prefix}.",apiKeyValidationFailed:"A validação da chave API falhou.",apiKeySaved:"Chave API salva.",unexpectedValidationResponse:"Resposta inesperada ao validar a chave API.",apiKeyInvalid:"A chave API não é válida.",apiKeyRejected:"A chave API foi rejeitada pelo serviço Manilua.",validationRequestFailed:"A solicitação de validação falhou com HTTP {status}.",validationException:"A validação da chave API falhou: {error}"},compat:{works:"Funciona",mayNotWork:"Pode não funcionar",needsBypass:"Precisa de bypass",drmDetected:"DRM detectado (Denuvo, etc.)",accountRequired:"Requer conta de terceiros",onlineOnly:"Apenas online",hasOnline:"Tem recursos online"}},uk:{common:{ok:"OK",cancel:"Скасувати",removeAllDlc:"Видалити всі DLC",remove:"Видалити",errorWithMessage:"Помилка: {message}"},buttons:{addToLibrary:"Додати до бібліотеки",editDlcLibrary:"Редагувати DLC у бібліотеці",removeFromLibrary:"Видалити з бібліотеки",loading:"Завантаження...",adding:"Додавання...",removing:"Видалення..."},errors:{manifestMissing:"Маніфест недоступний на публічних дзеркалах. Запросіть доступ вручну.",failedAddSelectedDlc:"Не вдалося додати обрані DLC.",failedInstallBaseGame:"Не вдалося встановити базову гру.",failedFetchInfo:"Не вдалося отримати інформацію про гру.",failedRemoveGame:"Не вдалося видалити гру!"},alerts:{addingFailedTitle:"Помилка додавання",unableAddTitle:"Неможливо додати гру",unableGetDlcTitle:"Неможливо отримати список DLC",unableRemoveTitle:"Неможливо видалити",noDlcTitle:"Немає доступних DLC"},messages:{changesApplied:"Зміни застосовано.",gameAdded:"Гру успішно додано!",gameRemoved:"Гру успішно видалено!",noDlcDetails:"Ця гра не має DLC для встановлення."},dialogs:{selectDlc:{title:"Оберіть DLC для додавання",subtitle:"Оберіть DLC, які хочете додати. Зніміть позначки з непотрібних.",selectAll:"Вибрати всі DLC",confirm:"Застосувати вибір",alreadyAdded:"вже додано"},baseInstall:{title:"Додати до бібліотеки",message:"У цієї гри немає DLC. Додати її до вашої бібліотеки?",confirm:"Додати гру"},restart:{title:"Перезапустити Steam",message:"{details} Потрібно перезапустити Steam. Зробити це зараз?",confirm:"Перезапустити",cancel:"Пізніше"},remove:{title:"Видалити з бібліотеки",message:"Ви впевнені, що хочете видалити цю гру з бібліотеки?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Підготовка файлів...",downloading:"Завантаження маніфестів...",merging:"Застосування обраних DLC...",removing:"Видалення з бібліотеки...",success:"Готово!",failure:"Операція не вдалася."},mirrors:{title:"Оберіть джерело завантаження",default:"Публічне дзеркало (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API Manilua (у розробці)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API Manilua (потрібен ключ)"},auth:{title:"API-ключ Manilua",instructions:"Введіть свій API-ключ Manilua. Його можна отримати в кабінеті Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Приклад: manilua_abc123...",save:"Зберегти",saving:"Збереження...",required:"Необхідно вказати ключ.",invalid:"Ключ недійсний. Спробуйте ще раз.",validationFailed:"Перевірка API-ключа не вдалася. Перевірте ключ і спробуйте знову.",error:"Помилка перевірки"},backend:{manifestAlreadyExists:"Маніфест вже існує",manifestNotAvailablePublic:"Маніфест для {name} ({appid}) недоступний на публічних дзеркалах.",manifestNotAvailablePublicNoName:"Маніфест для {appid} недоступний на публічних дзеркалах.",manifestSavedNoJson:"Маніфест збережено в {target} (без обробки JSON)",manifestSaved:"Маніфест збережено в {target}",couldNotDetermineAppid:"Не вдалося визначити AppID.",manifestNotAvailableManilua:"Маніфест для {name} ({appid}) недоступний через дзеркало Manilua. Перевірте свій API-ключ.",manifestNotAvailableManiluaNoName:"Маніфест для {appid} недоступний через дзеркало Manilua. Перевірте свій API-ключ.",manifestNotFoundManilua:"Маніфест для {name} ({appid}) не знайдено на дзеркалі Manilua.",manifestNotFoundManiluaNoName:"Маніфест для {appid} не знайдено на дзеркалі Manilua.",apiKeyRejectedManilua:"Ключ API відхилено дзеркалом Manilua. Перевірте свій API-ключ.",manifestNotFoundOnMirror:"Маніфест для {name} ({appid}) не знайдено на дзеркалі {source}.",couldNotDetermineAppidFromMessage:"Не вдалося визначити AppID з повідомлення.",maniluaRequiresApiKey:"Дзеркало Manilua потребує дійсний API-ключ.",dlcAdded:"Додано {count} DLC до {target}.",apiKeyNotConfigured:"API-ключ не налаштовано.",apiKeyRequired:"Необхідно вказати API-ключ.",apiKeyMustStartWith:"API-ключ має починатися з {prefix}.",apiKeyValidationFailed:"Перевірка API-ключа не вдалася.",apiKeySaved:"API-ключ збережено.",unexpectedValidationResponse:"Неочікувана відповідь при перевірці API-ключа.",apiKeyInvalid:"API-ключ недійсний.",apiKeyRejected:"API-ключ відхилено сервісом Manilua.",validationRequestFailed:"Запит перевірки не вдався з HTTP {status}.",validationException:"Перевірка API-ключа не вдалася: {error}",manifestNotAvailableRyuu:"Маніфест для {name} ({appid}) недоступний через дзеркало Ryuu.",manifestNotAvailableRyuuNoName:"Маніфест для {appid} недоступний через дзеркало Ryuu.",manifestNotFoundRyuu:"Маніфест для {name} ({appid}) не знайдено на дзеркалі Ryuu.",manifestNotFoundRyuuNoName:"Маніфест для {appid} не знайдено на дзеркалі Ryuu."},compat:{works:"Працює",mayNotWork:"Може не працювати",needsBypass:"Потрібен обхід",drmDetected:"Виявлено DRM (Denuvo та ін.)",accountRequired:"Потрібен сторонній акаунт",onlineOnly:"Тільки онлайн",hasOnline:"Є онлайн-функції"}}};function u(e){if(!e||"string"!=typeof e)return d;var a=e.trim();if(!a)return d;var t=a.toLowerCase();if("pt-br"===t||"pt_br"===t)return"pt-BR";if(t.startsWith("en"))return"en";if(t.startsWith("es"))return"es";if(t.startsWith("fr"))return"fr";if("ua"===t||t.startsWith("uk"))return"uk";if("ukrainian"===t)return"uk";var i=t.split(/[-_]/)[0],n=Object.keys(c).find(function(e){return e.toLowerCase()===i});return null!=n?n:d}var p=function(){return function(e,a){return a&&function(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.translations=new Map,this.currentLocale=d,this.initialised=!1,this.initPromise=null},[{key:"init",value:(a=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:if(!this.initialised){e.n=1;break}return e.a(2);case 1:return this.initPromise||(this.initPromise=this.bootstrap()),e.n=2,this.initPromise;case 2:this.initialised=!0;case 3:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"t",value:function(e,a){var t,i,n=null!==(t=null!==(i=this.lookup(this.currentLocale,e))&&void 0!==i?i:this.lookup(d,e))&&void 0!==t?t:e;return"string"!=typeof n?e:a?n.replace(/\{(.*?)\}/g,function(e,t){var i=a[t.trim()];return null==i?"":String(i)}):n}},{key:"bootstrap",value:(e=i(n().m(function e(){var a;return n().w(function(e){for(;;)switch(e.n){case 0:if(a=u(this.detectPreferredLocale()),this.loadLocale(a),this.translations.has(a)||a===d){e.n=1;break}return this.loadLocale(d),this.currentLocale=d,e.a(2);case 1:this.currentLocale=a;case 2:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"detectPreferredLocale",value:function(){var e=[];if("undefined"!=typeof window){var a,t,i,n,o=(null===(a=window)||void 0===a?void 0:a.g_strLanguage)||(null===(t=window)||void 0===t||null===(t=t.LocalizationManager)||void 0===t?void 0:t.m_strLanguage)||(null===(i=window)||void 0===i||null===(i=i.SteamClient)||void 0===i||null===(i=i.System)||void 0===i||null===(n=i.GetSteamUILanguage)||void 0===n?void 0:n.call(i));o&&e.push(o)}"undefined"!=typeof navigator&&(Array.isArray(navigator.languages)&&e.push.apply(e,r(navigator.languages)),navigator.language&&e.push(navigator.language),navigator.userLanguage&&e.push(navigator.userLanguage));var l=e.find(function(e){return u(e)!==d||e===d});return null!=l?l:d}},{key:"loadLocale",value:function(e){if(!this.translations.has(e)){var a=c[e];a&&this.translations.set(e,a)}}},{key:"lookup",value:function(e,a){var t=this.translations.get(e);if(t)return a.split(".").reduce(function(e,a){if(e&&"object"===s(e)&&!Array.isArray(e))return e[a]},t)}}]);var e,a}(),m=new p;function f(){return(f=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m.init();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function y(e,a){return m.t(e,a)}let g=null;const v=__wrapped_callable__("Backend.get_dlc_list"),b=__wrapped_callable__("Backend.install_dlcs"),h=__wrapped_callable__("Backend.delete_lua"),A=__wrapped_callable__("Backend.checkpirated"),x=__wrapped_callable__("Backend.restart"),I=__wrapped_callable__("Backend.set_manilua_api_key"),L=__wrapped_callable__("Backend.get_manilua_api_status");let M=!1;const N={hasKey:!1,isValid:!1,maskedKey:"",checked:!1},D="steam-app-inserter-compat-badge",w=["online pvp","online co-op","co-op online","multiplayer online","massively multiplayer","mmo","mmorpg","cross-platform multiplayer","crossplay","cross-play","pvp","requires internet connection","always online","live service","games as a service"],C=["single-player","single player","singleplayer"],_=["denuvo","securom","secucrom","arxan","vmprotect","requires 3rd-party drm","third-party drm"],E=["requires 3rd-party account","3rd-party account","ea account","ea app","ea play","ubisoft connect","uplay","rockstar social club","rockstar games launcher","battle.net","bethesda.net","2k account","epic account","riot account"],P=e=>{try{return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}catch{return e.toLowerCase().trim()}},k=e=>{document.getElementById(D)?.remove(),(()=>{if(document.getElementById("steam-app-inserter-compat-css"))return;const e=document.createElement("style");e.id="steam-app-inserter-compat-css",e.textContent="\n        .sai-compat-badge {\n            display: inline-flex;\n            align-items: center;\n            gap: 8px;\n            font-size: 12px;\n            line-height: 16px;\n            padding: 4px 12px;\n            border-radius: 3px;\n            background: rgba(0, 0, 0, 0.4);\n            border: 1px solid rgba(255, 255, 255, 0.15);\n            user-select: none;\n            cursor: help;\n            margin-right: 6px;\n            font-family: \"Motiva Sans\", Arial, sans-serif;\n            position: relative;\n        }\n        .sai-compat-dot {\n            width: 8px;\n            height: 8px;\n            border-radius: 50%;\n            flex-shrink: 0;\n        }\n        .sai-compat-text {\n            color: #c6d4df;\n        }\n        .sai-compat-tooltip {\n            position: absolute !important;\n            top: calc(100% + 8px) !important;\n            left: 50% !important;\n            transform: translateX(-50%) !important;\n            background: #171a21 !important;\n            border: 1px solid rgba(255, 255, 255, 0.2) !important;\n            border-radius: 4px !important;\n            padding: 10px 14px !important;\n            min-width: 200px !important;\n            max-width: 320px !important;\n            width: max-content !important;\n            height: auto !important;\n            max-height: none !important;\n            overflow: visible !important;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5) !important;\n            opacity: 0;\n            visibility: hidden;\n            transition: opacity 0.2s, visibility 0.2s;\n            z-index: 10000 !important;\n            pointer-events: none;\n            white-space: normal !important;\n            word-wrap: break-word !important;\n            text-align: left !important;\n            display: block !important;\n        }\n        .sai-compat-badge:hover .sai-compat-tooltip {\n            opacity: 1;\n            visibility: visible;\n        }\n        .sai-compat-tooltip::after {\n            content: '';\n            position: absolute;\n            bottom: 100%;\n            left: 50%;\n            transform: translateX(-50%);\n            border: 6px solid transparent;\n            border-bottom-color: #171a21;\n        }\n        .sai-compat-tooltip-title {\n            font-size: 13px !important;\n            font-weight: 500 !important;\n            color: #ffffff !important;\n            display: block !important;\n            white-space: normal !important;\n        }\n        .sai-compat-tooltip-title.has-items {\n            margin-bottom: 8px;\n            padding-bottom: 6px;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n        .sai-compat-tooltip-item {\n            font-size: 12px !important;\n            color: #acb2b8 !important;\n            line-height: 1.5 !important;\n            padding: 3px 0 !important;\n            display: flex !important;\n            align-items: flex-start !important;\n            gap: 8px !important;\n            white-space: normal !important;\n            overflow: visible !important;\n            height: auto !important;\n        }\n        .sai-compat-tooltip-item::before {\n            content: '•';\n            color: #67707b;\n            flex-shrink: 0;\n        }\n    ",document.head.appendChild(e)})();const a=(()=>{const{tags:e,specs:a,notices:t}=(()=>{const e=document.querySelectorAll(".glance_tags .app_tag, .popular_tags .app_tag"),a=document.querySelectorAll(".game_area_details_specs a.name, .game_area_details_specs li"),t=document.querySelectorAll(".DRM_notice, .game_area_sys_req, .game_area_description");return{tags:Array.from(e).map(e=>P(e.textContent||"")),specs:Array.from(a).map(e=>P(e.textContent||"")),notices:P(Array.from(t).map(e=>e.textContent||"").join(" "))}})(),i=[...e,...a].join(" ")+" "+t,n=e=>e.some(e=>i.includes(e)),o=n(w),r=n(C),l=n(_),s=n(E);let d="ok";const c=[];return l&&(d="bad",c.push(y("compat.drmDetected"))),s&&("bad"!==d&&(d="warn"),c.push(y("compat.accountRequired"))),o&&!r?("bad"!==d&&(d="warn"),c.push(y("compat.onlineOnly"))):o&&r&&("ok"===d&&(d="warn"),c.push(y("compat.hasOnline"))),{level:d,label:{ok:y("compat.works"),warn:y("compat.mayNotWork"),bad:y("compat.needsBypass")}[d],color:{ok:"#5c7e10",warn:"#a0790b",bad:"#a0352c"}[d],reasons:c}})(),t=document.createElement("div");t.id=D,t.className="sai-compat-badge";const i=document.createElement("span");i.className="sai-compat-dot",i.style.background=a.color;const n=document.createElement("span");n.className="sai-compat-text",n.textContent=a.label;const o=document.createElement("div");o.className="sai-compat-tooltip";const r=document.createElement("div");r.className="sai-compat-tooltip-title"+(a.reasons.length>0?" has-items":""),r.textContent=a.label,o.appendChild(r),a.reasons.length>0&&a.reasons.forEach(e=>{const a=document.createElement("div");a.className="sai-compat-tooltip-item",a.textContent=e,o.appendChild(a)}),t.appendChild(i),t.appendChild(n),t.appendChild(o),e.insertBefore(t,e.firstChild)},S=(e,a="primary")=>{const t=document.createElement("button");return t.type="button",t.className="primary"===a?"btnv6_blue_hoverfade btn_medium":"btnv6_lightblue_blue btn_medium",t.textContent=e,t.style.display="inline-flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.minWidth="170px",t.style.padding="0 28px",t.style.minHeight="32px",t.style.boxSizing="border-box",t},R=e=>new Promise(a=>{window.setTimeout(a,Math.max(0,e))}),T=(e,a)=>{if(!document.body)throw new Error("Document body not ready for dialog rendering.");const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0, 0, 0, 0.65)",t.style.zIndex="9999",t.style.display="flex",t.style.alignItems="flex-start",t.style.justifyContent="center",t.style.paddingTop="8vh";const i=document.createElement("div");i.style.background="#171a21",i.style.color="#ffffff",i.style.padding="24px",i.style.borderRadius="8px",i.style.maxWidth="520px",i.style.width="calc(100% - 48px)",i.style.boxShadow="0 12px 48px rgba(0, 0, 0, 0.45)",i.style.fontFamily='"Motiva Sans", Arial, sans-serif',i.style.outline="none",i.tabIndex=-1;const n=document.createElement("h2");if(n.textContent=e,n.style.margin="0 0 8px 0",i.appendChild(n),a){const e=document.createElement("p");e.textContent=a,e.style.marginTop="0",e.style.fontSize="14px",e.style.opacity="0.85",i.appendChild(e)}const o=document.createElement("div");o.style.margin="16px 0",i.appendChild(o);const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="flex-end",r.style.gap="12px",r.style.marginTop="16px",r.style.paddingTop="16px",i.appendChild(r),t.appendChild(i),document.body.appendChild(t);const l=e=>e.stopPropagation();i.addEventListener("click",l);let s=!1;return t.addEventListener("click",()=>{}),requestAnimationFrame(()=>{i.focus()}),{overlay:t,dialog:i,content:o,actions:r,close:()=>{if(!s){s=!0,i.removeEventListener("click",l);try{t.remove()}catch{const e=t.parentNode;e&&e.removeChild(t)}}}}},j=async(e,a)=>{document.body?await new Promise(t=>{const{dialog:i,content:n,actions:o,close:r}=T(e),l=document.createElement("p");l.textContent=a,l.style.margin="0",l.style.fontSize="14px",l.style.opacity="0.85",n.appendChild(l);let s=!1;const d=()=>{s||(s=!0,r(),t())},c=S(y("common.ok"),"primary");c.addEventListener("click",d),o.appendChild(c),i.addEventListener("keydown",e=>{"Escape"!==e.key&&("Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey)||(e.preventDefault(),d())}),requestAnimationFrame(()=>c.focus())}):alert(`${e}\n\n${a}`)},K=async({title:e,message:a,confirmLabel:t=y("common.ok"),cancelLabel:i=y("common.cancel")})=>document.body?await new Promise(n=>{const{dialog:o,content:r,actions:l,close:s}=T(e),d=document.createElement("p");d.textContent=a,d.style.margin="0",d.style.fontSize="14px",d.style.opacity="0.85",r.appendChild(d);let c=!1;const u=e=>{c||(c=!0,s(),n(e))},p=S(i,"secondary");p.addEventListener("click",()=>u(!1));const m=S(t,"primary");m.addEventListener("click",()=>u(!0)),l.appendChild(p),p.addEventListener("click",()=>u(!1)),l.appendChild(m),o.addEventListener("keydown",e=>{"Escape"===e.key?(e.preventDefault(),u(!1)):"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||(e.preventDefault(),u(!0))}),requestAnimationFrame(()=>m.focus())}):confirm(a),O=(e,a="")=>"string"==typeof e&&e.trim().length?e.trim():"number"==typeof e?String(e):a,F=e=>{if(!e||"object"!=typeof e)return"";const a=e.message_code,t=e.message_params;return"string"==typeof a&&a.length>0?y(a,t||{}):O(e.details||e.message||e.error,"")},q={preparing:"status.preparing",downloading:"status.downloading",merging:"status.merging",removing:"status.removing",success:"status.success",failure:"status.failure"},B=(e="preparing")=>{if(!document?.body)return{setStatus:()=>{},close:()=>{}};const a=document.createElement("div");a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.background="rgba(0, 0, 0, 0.55)",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.zIndex="9999";const t=document.createElement("div");t.style.minWidth="260px",t.style.maxWidth="360px",t.style.padding="24px 28px",t.style.background="#171a21",t.style.borderRadius="6px",t.style.border="1px solid rgba(103, 193, 245, 0.45)",t.style.boxShadow="0 18px 48px rgba(0, 0, 0, 0.45)",t.style.color="#ffffff",t.style.fontFamily='"Motiva Sans", Arial, sans-serif',t.style.textAlign="center";const i=document.createElement("div");i.style.fontSize="15px",i.style.lineHeight="1.5",i.style.minHeight="40px",t.appendChild(i),a.appendChild(t),document.body.appendChild(a);let n=!1;const o=e=>{n||(i.textContent=y(q[e]))},r=()=>{try{a.remove()}catch{const e=a.parentNode;e&&e.removeChild(a)}};return o(e),{setStatus:o,close:(e,a=0)=>{n||(n=!0,e&&o(e),window.setTimeout(r,Math.max(0,a)))}}},G=[{id:"default",labelKey:"mirrors.default",requiresApiKey:!1},{id:"kernelos",labelKey:"mirrors.kernelos",requiresApiKey:!1}],V=(e,a=!1)=>{if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim();try{if(!t.startsWith("{")||!t.endsWith("}"))return"true"===t.toLowerCase()||"false"!==t.toLowerCase()&&a;e=JSON.parse(t)}catch{return a}}if(e&&"object"==typeof e&&!Array.isArray(e)){const a=e;if("boolean"==typeof a.configured)return a.configured;if("boolean"==typeof a.success)return a.success;if("boolean"==typeof a.isValid)return a.isValid;if("boolean"==typeof a.hasKey)return a.hasKey}return"boolean"==typeof e?e:a},W=async(e=!1)=>{if(e&&(N.checked=!1),N.checked)return{...N};try{const e=await L();let a=e;if("string"==typeof e){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}"))try{a=JSON.parse(t)}catch{}}if(a&&"object"==typeof a&&!Array.isArray(a)){const t=a;N.hasKey=t.hasOwnProperty("hasKey")?Boolean(t.hasKey):V(e,!1),N.isValid=t.hasOwnProperty("isValid")?!1!==t.isValid:N.hasKey,N.maskedKey="string"==typeof t.maskedKey?t.maskedKey:"";const i=t.message??t.details;N.message="string"==typeof i?i:void 0}else{const a=V(e,!1);N.hasKey=a,N.isValid=a,N.maskedKey="",N.message=void 0}}catch(e){N.hasKey=!1,N.isValid=!1,N.maskedKey="",N.message=e instanceof Error?e.message:String(e)}return N.checked=!0,{...N}},z=async(e=g??"default")=>{if(!document?.body)return e;const a=new Set([]);return await new Promise(t=>{const{dialog:i,content:n,actions:o,close:r}=T(y("mirrors.title")),l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.gap="6px",l.style.marginBottom="12px";let s=e;G.forEach(e=>{const t=a.has(e.id),i=document.createElement("label");i.style.display="flex",i.style.alignItems="center",i.style.gap="10px",i.style.padding="6px 8px",i.style.border="1px solid rgba(255, 255, 255, 0.1)",i.style.borderRadius="4px",i.style.cursor=t?"not-allowed":"pointer",t&&(i.style.opacity="0.6");const n=document.createElement("input");n.type="radio",n.name="mirror-option",n.value=e.id,n.checked=e.id===s,n.disabled=t,t||n.addEventListener("change",()=>s=e.id);const o=document.createElement("div");o.textContent=y(e.labelKey),o.style.flex="1";const r=t?y("mirrors.maniluaDisabled"):e.requiresApiKey?y("auth.title"):"";if(i.appendChild(n),i.appendChild(o),r){const e=document.createElement("span");e.style.fontSize="11px",e.style.opacity="0.7",e.textContent=r,i.appendChild(e)}i.addEventListener("click",()=>{t||(n.checked=!0,s=e.id)}),l.appendChild(i)}),n.innerHTML="",n.appendChild(l);const d=S(y("common.cancel"),"secondary"),c=S(y("common.ok"),"primary");let u=!1;const p=e=>{u||(u=!0,r(),t(e))};d.onclick=e=>{e.preventDefault(),p(null)},c.onclick=async e=>{e.preventDefault();const t=G.find(e=>e.id===s);if(t)if(a.has(t.id))await j(y("mirrors.title"),y("mirrors.maniluaDisabled"));else{if(t.requiresApiKey&&"manilua"===t.id&&!await(async()=>{let e=await W();return!((!e.hasKey||!1===e.isValid)&&(e.hasKey&&!1===e.isValid&&await j(y("auth.title"),e.message??y("auth.validationFailed")),!await(async()=>!!document?.body&&await new Promise(e=>{const{dialog:a,content:t,actions:i,close:n}=T(y("auth.title"));t.innerHTML="";const o=document.createElement("div");o.style.marginBottom="12px",o.style.fontSize="14px",o.style.opacity="0.85",o.textContent=y("auth.instructions");const r=document.createElement("input");r.type="text",r.placeholder=y("auth.placeholder"),r.autocomplete="off",r.style.cssText=["width: 100%","padding: 8px 12px","background: rgba(0,0,0,0.35)","border: 1px solid #5c5c5c","border-radius: 3px","color: #ffffff","font-size: 14px","box-sizing: border-box"].join(";");const l=document.createElement("div");l.style.marginTop="8px",l.style.fontSize="12px",l.style.opacity="0.8",l.textContent=y("auth.example"),t.appendChild(o),t.appendChild(r),t.appendChild(l);const s=S(y("common.cancel"),"secondary"),d=S(y("auth.save"),"primary");let c=!1;const u=a=>{c||(c=!0,n(),e(a))},p=e=>{l.textContent=e,l.style.opacity="1",l.style.color="#ffa03b"};s.onclick=e=>{e.preventDefault(),u(!1)},d.onclick=async e=>{e.preventDefault();const a=r.value.trim();if(!a)return r.style.borderColor="#d94126",p(y("auth.required")),void r.focus();r.style.borderColor="",l.textContent=y("auth.example"),l.style.opacity="0.8",l.style.color="",d.disabled=!0,s.disabled=!0,d.textContent=y("auth.saving");try{const e=(e=>{if(e&&"object"==typeof e&&!Array.isArray(e)){const a=e,t=!1!==a.success,i=F(a)||void 0;return{success:t,message:i,error:!t&&i?i:void 0}}if("boolean"==typeof e)return{success:e};if("string"==typeof e){const a=e.trim().toLowerCase();return"true"===a?{success:!0}:"false"===a?{success:!1}:{success:!0,message:e}}return{success:!1,error:"Unexpected response from backend."}})(await I({api_key:a}));e.success?(N.hasKey=!0,N.isValid=!0,N.maskedKey=(e=>{const a=e.trim();if(!a.length)return"";if(a.length<=4)return"*".repeat(a.length);const t=a.slice(0,4),i=a.length>6?a.slice(-2):"",n=Math.max(0,a.length-t.length-i.length);return`${t}${"*".repeat(n)}${i}`})(a),N.message=e.message,N.checked=!0,u(!0)):(r.style.borderColor="#d94126",p(e.error||e.message||y("auth.invalid")))}catch(e){r.style.borderColor="#d94126";const a=e instanceof Error?e.message:String(e);p(`${y("auth.error")}: ${a}`)}finally{d.disabled=!1,s.disabled=!1,d.textContent=y("auth.save")}},i.appendChild(s),i.appendChild(d),a.addEventListener("keydown",e=>{"Escape"===e.key?(e.preventDefault(),u(!1)):"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||(e.preventDefault(),d.click())}),r.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||(e.preventDefault(),d.click())}),requestAnimationFrame(()=>r.focus())}))()||(await W(!0),e=await W(),(!e.hasKey||!1===e.isValid)&&(await j(y("auth.title"),e.message??y("auth.validationFailed")),1))))})())return;g=s,p(s)}},o.appendChild(d),o.appendChild(c),i.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),p(null))})})},U=e=>{if(!e||"object"!=typeof e)return null;const a=e,t=O(a.appid??a.appid);return t?{appid:t,name:O(a.name??a.name,`DLC ${t}`),alreadyInstalled:Boolean(a.alreadyInstalled??a.alreadyInstalled)}:null},H=e=>{if(e&&"object"==typeof e&&!Array.isArray(e)){const a=e,t=(Array.isArray(a.dlc)?a.dlc:[]).map(U).filter(e=>null!==e),i=Boolean(a.success);return{success:i,details:F(a)||(i?"":y("errors.manifestMissing")),dlc:t,appid:O(a.appid,void 0)}}if("string"==typeof e)try{const a=JSON.parse(e);return H(a)}catch{const a=e.toLowerCase().trim();return"true"===a?{success:!0,details:"",dlc:[]}:"false"===a?{success:!1,details:y("errors.manifestMissing"),dlc:[]}:{success:!1,details:e,dlc:[]}}return"boolean"==typeof e?{success:e,details:e?"":y("errors.manifestMissing"),dlc:[]}:{success:!1,details:y("errors.manifestMissing"),dlc:[]}},J=e=>Array.isArray(e)?e.map(e=>O(e)).filter(e=>Boolean(e)):[],$=e=>{if(e&&"object"==typeof e&&!Array.isArray(e)){const a=e;return{success:Boolean(a.success),details:F(a),installed:J(a.installed),failed:J(a.failed)}}if("string"==typeof e)try{const a=JSON.parse(e);return $(a)}catch{const a=e.toLowerCase().trim();return"true"===a?{success:!0,details:void 0,installed:[],failed:[]}:"false"===a?{success:!1,details:void 0,installed:[],failed:[]}:{success:!1,details:e,installed:[],failed:[]}}return"boolean"==typeof e?{success:e,details:void 0,installed:[],failed:[]}:{success:!1,details:void 0,installed:[],failed:[]}},Y="add-app-to-library-btn",Q="remove-app-from-library-btn",X={ADD_TO_LIBRARY:"buttons.addToLibrary",EDIT_DLC_LIBRARY:"buttons.editDlcLibrary",REMOVE_FROM_LIBRARY:"buttons.removeFromLibrary",LOADING:"buttons.loading",ADDING:"buttons.adding",REMOVING:"buttons.removing"},Z=e=>`<span>${y(X[e])}</span>`,ee=(e,a)=>{e.disabled=!1,e.innerHTML=Z(a?"EDIT_DLC_LIBRARY":"ADD_TO_LIBRARY")},ae=async(e,a)=>{await K({title:y("dialogs.restart.title"),message:y("dialogs.restart.message",{details:e}),confirmLabel:y("dialogs.restart.confirm"),cancelLabel:y("dialogs.restart.cancel")})?await x():await a()};return e.default=async function(){if(await function(){return f.apply(this,arguments)}(),!/^https:\/\/store\.steampowered\.com\/app\//.test(location.href))return;const e=()=>{const e=location.href.match(/\/app\/(\d+)/);return e?e[1]:null},a=async()=>{try{const t=await((e,a=2e4)=>new Promise((t,i)=>{const n=document.querySelector(e);if(n)return t(n);const o=new MutationObserver(()=>{const a=document.querySelector(e);a&&(o.disconnect(),t(a))});o.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout(()=>{o.disconnect(),i(new Error("timeout"))},a)}))(".apphub_OtherSiteInfo");k(t);const i=e();if(!i)return;const n=await A({id:i});document.getElementById(Y)?.remove(),document.getElementById(Q)?.remove();const o=document.createElement("button");if(o.id=Y,o.type="button",o.style.marginRight="3px",o.className="btnv6_blue_hoverfade btn_medium",n){const e=document.createElement("button");e.id=Q,e.type="button",e.style.marginRight="3px",e.className="btnv6_blue_hoverfade btn_medium",e.innerHTML=Z("REMOVE_FROM_LIBRARY"),e.addEventListener("click",async t=>{if(t.preventDefault(),!await K({title:y("dialogs.remove.title"),message:y("dialogs.remove.message"),confirmLabel:y("common.remove"),cancelLabel:y("common.cancel")}))return;e.disabled=!0,e.innerHTML=Z("REMOVING");const n=B("removing");try{n.setStatus("removing"),await h({id:i})?(n.close("success",600),await R(600),await ae(y("messages.gameRemoved"),a)):(n.close("failure",1200),await j(y("alerts.unableRemoveTitle"),y("errors.failedRemoveGame")),e.disabled=!1,e.innerHTML=Z("REMOVE_FROM_LIBRARY"))}catch(a){n.close("failure",1200);const t=a instanceof Error?a.message:String(a);await j(y("alerts.unableRemoveTitle"),y("common.errorWithMessage",{message:t})),e.disabled=!1,e.innerHTML=Z("REMOVE_FROM_LIBRARY")}});const n=t.lastElementChild;n?t.insertBefore(e,n):t.appendChild(e),o.innerHTML=Z("EDIT_DLC_LIBRARY")}else o.innerHTML=Z("ADD_TO_LIBRARY");o.addEventListener("click",async e=>{if(e.preventDefault(),M)return;const t=await(async()=>await z(g??"default"))();if(t){M=!0,o.disabled=!0,o.innerHTML=Z("LOADING");try{const e=await v({appid:i,mirror:t}),r=H(e);if(!r.success)return await j(y("alerts.unableGetDlcTitle"),r.details??y("errors.failedFetchInfo")),void ee(o,n);r.dlc&&r.dlc.length?await(async(e,a,t,i,n)=>{const o=n,r=await(async(e,a,t,i=!1)=>{const n=a.map(U).filter(e=>null!==e);return!(!n.length||!document.body)&&await new Promise(a=>{const{dialog:o,content:r,actions:l,close:s}=T(y("dialogs.selectDlc.title"),y("dialogs.selectDlc.subtitle"));r.style.margin="0";const d=document.createElement("div");d.style.maxHeight="40vh",d.style.overflowY="auto",d.style.margin="16px 0",d.style.paddingRight="8px",r.appendChild(d);const c=[],u=document.createElement("label");u.style.display="flex",u.style.alignItems="center",u.style.gap="10px",u.style.padding="6px 0",u.style.borderBottom="1px solid rgba(255, 255, 255, 0.08)",u.style.cursor="pointer",u.style.margin="0",d.appendChild(u);const p=document.createElement("input");p.type="checkbox",p.title=y("dialogs.selectDlc.selectAll"),p.style.transform="scale(1.1)",p.style.cursor="pointer",p.dataset.role="master",u.appendChild(p);const m=document.createElement("div");m.textContent=y("dialogs.selectDlc.selectAll"),m.style.fontWeight="600",u.appendChild(m);const f=()=>{if(!c.length)return p.checked=!1,p.indeterminate=!1,void(p.disabled=!0);p.disabled=!1;const e=c.every(e=>e.checked),a=c.some(e=>e.checked);p.checked=e,p.indeterminate=!e&&a};n.forEach((e,a)=>{const t=document.createElement("label");t.dataset.appid=e.appid,t.style.display="flex",t.style.alignItems="center",t.style.gap="10px",t.style.padding="6px 0",t.style.borderBottom="1px solid rgba(255, 255, 255, 0.08)";const o=document.createElement("input");o.type="checkbox",o.value=e.appid,o.dataset.role="dlc",c.push(o);const r=document.createElement("div");r.textContent=e.name&&e.name.trim().length?e.name:y("labels.dlcWithId",{id:e.appid}),e.alreadyInstalled&&(o.checked=i||!1),t.appendChild(o),t.appendChild(r),d.appendChild(t),o.addEventListener("change",()=>{f()}),a===n.length-1&&(t.style.borderBottom="none")});const g=S(y("common.cancel"),"secondary"),v=S(y("dialogs.selectDlc.confirm"),"primary");let h=!1;const A=e=>{h||(h=!0,s(),a(e))},x=e=>{v.disabled=e,e?o.setAttribute("aria-busy","true"):o.removeAttribute("aria-busy")};v.addEventListener("click",async()=>{const a=c.filter(e=>e.checked).map(e=>e.value);x(!0);const i=B("preparing");try{i.setStatus("downloading");const n=await b({appid:e,dlcs:a,mirror:t}),o=$(n);o.success?(i.setStatus("merging"),i.close("success",600),A(!0)):(i.close("failure",1200),x(!1),await j(y("alerts.addingFailedTitle"),o.details||y("errors.failedAddSelectedDlc")))}catch(e){i.close("failure",1200),x(!1),await j(y("alerts.addingFailedTitle"),y("common.errorWithMessage",{message:e instanceof Error?e.message:String(e)}))}}),g.addEventListener("click",()=>A(!1)),l.appendChild(g),l.appendChild(v),o.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),A(!1))}),p.addEventListener("change",()=>{c.length&&(c.forEach(e=>{e.checked=p.checked}),f())}),f()})})(e,a,i,o);r?await ae(y("messages.changesApplied"),t):await t()})(i,r.dlc,a,t,n):n?(await j(y("alerts.noDlcTitle"),y("messages.noDlcDetails")),ee(o,n)):await(async(e,a,t,i,n)=>{if(!await(async()=>K({title:y("dialogs.baseInstall.title"),message:y("dialogs.baseInstall.message"),confirmLabel:y("dialogs.baseInstall.confirm"),cancelLabel:y("common.cancel")}))())return void ee(a,t);a.innerHTML=Z("ADDING");const o=B("preparing");try{o.setStatus("downloading");const r=await b({appid:e,dlcs:[],mirror:n}),l=$(r);l.success?(o.setStatus("merging"),o.close("success",600),await R(600),await ae(y("messages.gameAdded"),i)):(o.close("failure",1200),await j(y("alerts.unableAddTitle"),l.details||y("errors.failedInstallBaseGame")),ee(a,t))}catch(e){const i=e instanceof Error?e.message:String(e);o.close("failure",1200),await j(y("alerts.unableAddTitle"),y("common.errorWithMessage",{message:i})),ee(a,t)}})(i,o,n,a,t)}catch(e){await(async(e,a,t)=>{const i=e instanceof Error?e.message:String(e);await j(y("alerts.unableGetDlcTitle"),y("common.errorWithMessage",{message:i})),ee(a,t)})(e,o,n)}finally{M=!1}}});const r=t.lastElementChild;r?t.insertBefore(o,r):t.appendChild(o)}catch{setTimeout(a,1e3)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a,{once:!0}):a();const t=(e=>{let a=0,t=null;return(...i)=>{const n=Date.now(),o=n-a;o>=500?(a=n,e(...i)):t||(t=setTimeout(()=>{a=Date.now(),t=null,e(...i)},500-o))}})(()=>{!e()||document.getElementById(Y)||document.getElementById(Q)||a()});new MutationObserver(t).observe(document.body,{childList:!0,subtree:!0})},Object.defineProperty(e,"__esModule",{value:!0}),e}({},window.MILLENNIUM_API);return e};function ExecutePluginModule(){let e=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName];e.OnPluginConfigChange=function(a,t,i){a in e.settingsStore&&(e.ignoreProxyFlag=!0,e.settingsStore[a]=i,e.ignoreProxyFlag=!1)},MILLENNIUM_BACKEND_IPC.postMessage(0,{pluginName:pluginName,methodName:"__builtins__.__millennium_plugin_settings_parser__"}).then(async a=>{"string"==typeof a.returnValue&&(e.ignoreProxyFlag=!0,e.settingsStore=e.DefinePluginSetting(Object.fromEntries(JSON.parse(atob(a.returnValue)).map(e=>[e.functionName,e]))),e.ignoreProxyFlag=!1);let t=PluginEntryPointMain();Object.assign(window.PLUGIN_LIST[pluginName],{...t,__millennium_internal_plugin_name_do_not_use_or_change__:pluginName});let i=await t.default();var n;i&&(n=i)&&void 0!==n.title&&void 0!==n.icon&&void 0!==n.content?window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS[pluginName]=i:console.warn(`Plugin ${pluginName} does not contain proper SidebarNavigation props and therefor can't be mounted by Millennium. Please ensure it has a title, icon, and content.`)})}ExecutePluginModule();