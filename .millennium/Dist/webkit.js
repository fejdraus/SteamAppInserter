const MILLENNIUM_IS_CLIENT_MODULE=!1,pluginName="steam-app-inserter";function InitializePlugins(){var e,t;let a;(e=window.PLUGIN_LIST||(window.PLUGIN_LIST={}))[pluginName]||(e[pluginName]={}),(t=window.MILLENNIUM_PLUGIN_SETTINGS_STORE||(window.MILLENNIUM_PLUGIN_SETTINGS_STORE={}))[pluginName]||(t[pluginName]={}),window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS||(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS={}),function(e){e[e.CallServerMethod=0]="CallServerMethod"}(a||(a={}));let i=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName],n=`Millennium.Internal.IPC.[${pluginName}]`;const o={DropDown:["string","number","boolean"],NumberTextInput:["number"],StringTextInput:["string"],FloatTextInput:["number"],CheckBox:["boolean"],NumberSlider:["number"],FloatSlider:["number"]};i.ignoreProxyFlag=!1;const r=e=>new Proxy(e,{set(e,t,a){if(!(t in e))throw new TypeError(`Property ${String(t)} does not exist on plugin settings`);const r=o[e[t].type],l=e[t]?.range;if(r.includes("number")&&"number"==typeof a&&(l&&(a=function(e,t,a){return Math.max(t,Math.min(a,e))}(a,l[0],l[1])),a||(a=0)),!r.includes(typeof a))throw new TypeError(`Expected ${r.join(" or ")}, got ${typeof a}`);return e[t].value=a,((e,t)=>{i.ignoreProxyFlag||SteamClient.BrowserView.PostMessageToParent(n,JSON.stringify({name:e,value:t}))})(String(t),a),!0},get:(e,t)=>"__raw_get_internals__"===t?e:t in e?e[t].value:void 0});i.DefinePluginSetting=r,i.settingsStore=r({})}InitializePlugins();const __call_server_method__=(e,t)=>Millennium.callServerMethod(pluginName,e,t);function __wrapped_callable__(e){return e.startsWith("webkit:")?MILLENNIUM_API.callable((e,t)=>MILLENNIUM_API.__INTERNAL_CALL_WEBKIT_METHOD__(pluginName,e,t),e.replace(/^webkit:/,"")):MILLENNIUM_API.callable(__call_server_method__,e)}let PluginEntryPointMain=function(){var e=function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function a(e,t,a,i,n,o,r){try{var l=e[o](r),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(i,n)}function i(e){return function(){var t=this,i=arguments;return new Promise(function(n,o){var r=e.apply(t,i);function l(e){a(r,n,o,l,s,"next",e)}function s(e){a(r,n,o,l,s,"throw",e)}l(void 0)})}}function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,i,n,r){var l=i&&i.prototype instanceof d?i:d,c=Object.create(l.prototype);return o(c,"_invoke",function(a,i,n){var o,r,l,d=0,c=n||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,a){return o=t,r=0,l=e,p.n=a,s}};function m(a,i){for(r=a,l=i,t=0;!u&&d&&!n&&t<c.length;t++){var n,o=c[t],m=p.p,f=o[2];a>3?(n=f===i)&&(l=o[(r=o[4])?5:(r=3,3)],o[4]=o[5]=e):o[0]<=m&&((n=a<2&&m<o[1])?(r=0,p.v=i,p.n=o[1]):m<f&&(n=a<3||o[0]>i||i>f)&&(o[4]=a,o[5]=i,p.n=f,r=0))}if(n||a>1)return s;throw u=!0,i}return function(n,c,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===c&&m(c,f),r=c,l=f;(t=r<2?e:l)||!u;){o||(r?r<3?(r>1&&(p.n=-1),m(r,l)):p.n=l:p.v=l);try{if(d=2,o){if(r||(n="next"),t=o[n]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,r<2&&(r=0)}else 1===r&&(t=o.return)&&t.call(o),r<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),r=1);o=e}else if((t=(u=p.n<0)?l:a.call(i,p))!==s)break}catch(t){o=e,r=1,l=t}finally{d=1}}return{value:t,done:u}}}(a,n,r),!0),c}var s={};function d(){}function c(){}function u(){}t=Object.getPrototypeOf;var p=[][i]?t(t([][i]())):(o(t={},i,function(){return this}),t),m=u.prototype=d.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,o(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=u,o(m,"constructor",u),o(u,"constructor",c),c.displayName="GeneratorFunction",o(u,r,"GeneratorFunction"),o(m),o(m,r,"Generator"),o(m,i,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:f}})()}function o(e,t,a,i){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}o=function(e,t,a,i){function r(t,a){o(e,t,function(e){return this._invoke(t,a,e)})}t?n?n(e,t,{value:a,enumerable:!i,configurable:!i,writable:!i}):e[t]=a:(r("next",0),r("throw",1),r("return",2))},o(e,t,a,i)}function r(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return t(e,a);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var d="en",c={en:{common:{ok:"OK",cancel:"Cancel",save:"Save",saving:"Saving...",removeAllDlc:"Remove all DLC",remove:"Remove",errorWithMessage:"Error: {message}"},buttons:{addToLibrary:"Add to library",editDlcLibrary:"Edit DLC library",removeFromLibrary:"Remove from library",loading:"Loading...",adding:"Adding...",removing:"Removing..."},errors:{manifestMissing:"Manifest not found on public mirrors. Please request manual access.",failedAddSelectedDlc:"Failed to add selected DLC.",failedInstallBaseGame:"Failed to install the base game.",failedFetchInfo:"Failed to fetch game information.",failedRemoveGame:"Failed to remove the game!"},alerts:{addingFailedTitle:"Adding failed",unableAddTitle:"Unable to add game",unableGetDlcTitle:"Unable to get DLC list",unableRemoveTitle:"Unable to remove",noDlcTitle:"No DLC available"},messages:{changesApplied:"Changes applied.",gameAdded:"Game added successfully!",gameRemoved:"Game removed successfully!",noDlcDetails:"This game has no DLC to install."},dialogs:{selectDlc:{title:"Select DLC to add",subtitle:"Select DLC to add. Uncheck any you don't want to add.",selectAll:"Select all DLC",confirm:"Apply selection",alreadyAdded:"already added"},baseInstall:{title:"Add to library",message:"This game has no DLC. Do you want to add it to your library?",confirm:"Add game"},restart:{title:"Restart Steam",message:"{details} Steam needs to restart. Restart now?",confirm:"Restart now",cancel:"Later"},remove:{title:"Remove from library",message:"Are you sure you want to remove this game from your library?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparing files...",downloading:"Downloading and scanning...",merging:"Merging DLC selections...",removing:"Removing from library...",success:"All done!",failure:"Operation failed."},mirrors:{title:"Choose download source",default:"Public mirror (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"Manilua API (in development)",maniluaDisabled:"",kernelos:"KernelOS"},auth:{title:"Manilua API Key",instructions:"Enter your Manilua API key. You can obtain it from the Manilua dashboard.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Example: manilua_abc123...",save:"Save",saving:"Saving...",required:"API key is required.",invalid:"API key is invalid. Please try again.",validationFailed:"API key validation failed. Please verify the key and try again.",error:"Validation error"},backend:{manifestAlreadyExists:"Manifest already exists",manifestNotAvailablePublic:"Manifest for {name} ({appid}) is not available on the public mirrors.",manifestNotAvailablePublicNoName:"Manifest for {appid} is not available on the public mirrors.",manifestSavedNoJson:"Manifest saved to {target} (no JSON processing)",manifestSaved:"Manifest saved to {target}",couldNotDetermineAppid:"Could not determine AppID.",manifestNotAvailableManilua:"Manifest for {name} ({appid}) is not available via the Manilua mirror. Please check your API key.",manifestNotAvailableManiluaNoName:"Manifest for {appid} is not available via the Manilua mirror. Please verify your API key.",manifestNotFoundManilua:"Manifest for {name} ({appid}) not found on the Manilua mirror.",manifestNotFoundManiluaNoName:"Manifest for {appid} not found on the Manilua mirror.",apiKeyRejectedManilua:"API key is rejected by the Manilua mirror. Please check your API key.",manifestNotFoundOnMirror:"Manifest for {name} ({appid}) not found on {source} mirror.",couldNotDetermineAppidFromMessage:"Could not determine AppID from message.",maniluaRequiresApiKey:"The Manilua mirror requires a valid API key.",dlcAdded:"Added {count} DLC to {target}.",apiKeyNotConfigured:"API key not configured.",apiKeyRequired:"API key is required.",apiKeyMustStartWith:"API key must start with {prefix}.",apiKeyValidationFailed:"API key validation failed.",apiKeySaved:"API key saved.",unexpectedValidationResponse:"Unexpected response while validating API key.",apiKeyInvalid:"API key is invalid.",apiKeyRejected:"API key was rejected by the Manilua service.",validationRequestFailed:"Validation request failed with HTTP {status}.",validationException:"API key validation failed: {error}",manifestNotAvailableRyuu:"Manifest for {name} ({appid}) is not available via the Ryuu mirror.",manifestNotAvailableRyuuNoName:"Manifest for {appid} is not available via the Ryuu mirror.",manifestNotFoundRyuu:"Manifest for {name} ({appid}) not found on the Ryuu mirror.",manifestNotFoundRyuuNoName:"Manifest for {appid} not found on the Ryuu mirror."},compat:{works:"Works",mayNotWork:"May not work",needsBypass:"Needs bypass",drmDetected:"DRM detected (Denuvo, etc.)",accountRequired:"Requires third-party account",onlineOnly:"Online only",hasOnline:"Has online features"},settings:{title:"Settings",vtDescription:"Scan downloaded files for malware before installation. Get your free API key at virustotal.com",vtPlaceholder:"Enter VirusTotal API key...",vtEnabled:"Key configured",vtDisabled:"Key invalid",vtNotConfigured:"Key not set",vtInvalidKey:"Invalid key format (64 characters required)"}},es:{common:{ok:"Aceptar",cancel:"Cancelar",removeAllDlc:"Eliminar todos los DLC",remove:"Quitar",errorWithMessage:"Error: {message}"},buttons:{addToLibrary:"Añadir a la biblioteca",editDlcLibrary:"Editar DLC en la biblioteca",removeFromLibrary:"Quitar de la biblioteca",loading:"Cargando...",adding:"Añadiendo...",removing:"Quitando..."},errors:{manifestMissing:"Manifiesto no disponible en los espejos públicos. Solicita acceso manual.",failedAddSelectedDlc:"No se pudieron añadir los DLC seleccionados.",failedInstallBaseGame:"No se pudo instalar el juego base.",failedFetchInfo:"No se pudo obtener la información del juego.",failedRemoveGame:"¡No se pudo quitar el juego!"},alerts:{addingFailedTitle:"Error al añadir",unableAddTitle:"No se puede añadir el juego",unableGetDlcTitle:"No se puede obtener la lista de DLC",unableRemoveTitle:"No se puede quitar",noDlcTitle:"No hay DLC disponibles"},messages:{changesApplied:"Cambios aplicados.",gameAdded:"¡Juego añadido correctamente!",gameRemoved:"¡Juego eliminado correctamente!",noDlcDetails:"Este juego no tiene DLC para instalar."},dialogs:{selectDlc:{title:"Selecciona los DLC que quieres añadir",subtitle:"Selecciona los DLC que quieras añadir. Desmarca los que no necesites.",selectAll:"Seleccionar todos los DLC",confirm:"Aplicar selección",alreadyAdded:"ya añadido"},baseInstall:{title:"Añadir a la biblioteca",message:"Este juego no tiene DLC. ¿Quieres añadirlo a tu biblioteca?",confirm:"Añadir juego"},restart:{title:"Reiniciar Steam",message:"{details} Steam necesita reiniciarse. ¿Reiniciar ahora?",confirm:"Reiniciar ahora",cancel:"Más tarde"},remove:{title:"Quitar de la biblioteca",message:"¿Seguro que quieres quitar este juego de tu biblioteca?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparando archivos...",downloading:"Descargando y escaneando...",merging:"Combinando seleccion de DLC...",removing:"Quitando de la biblioteca...",success:"Listo.",failure:"La operacion fallo."},mirrors:{title:"Elige la fuente de descarga",default:"Espejo público (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API de Manilua (en desarrollo)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API de Manilua (requiere clave)"},auth:{title:"Clave de la API Manilua",instructions:"Introduce tu clave de la API Manilua. Puedes obtenerla en el panel de Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Ejemplo: manilua_abc123...",save:"Guardar",saving:"Guardando...",required:"La clave es obligatoria.",invalid:"La clave no es valida. Intentalo de nuevo.",validationFailed:"La validacion de la clave fallo. Comprueba la clave e intentalo de nuevo.",error:"Error de validacion"},backend:{manifestAlreadyExists:"El manifiesto ya existe",manifestNotAvailablePublic:"El manifiesto para {name} ({appid}) no está disponible en los espejos públicos.",manifestNotAvailablePublicNoName:"El manifiesto para {appid} no está disponible en los espejos públicos.",manifestSavedNoJson:"Manifiesto guardado en {target} (sin procesamiento JSON)",manifestSaved:"Manifiesto guardado en {target}",couldNotDetermineAppid:"No se pudo determinar el AppID.",manifestNotAvailableManilua:"El manifiesto para {name} ({appid}) no está disponible a través del espejo Manilua. Comprueba tu clave API.",manifestNotAvailableManiluaNoName:"El manifiesto para {appid} no está disponible a través del espejo Manilua. Verifica tu clave API.",manifestNotFoundManilua:"El manifiesto para {name} ({appid}) no se encuentra en el espejo Manilua.",manifestNotFoundManiluaNoName:"El manifiesto para {appid} no se encuentra en el espejo Manilua.",apiKeyRejectedManilua:"La clave API ha sido rechazada por el espejo Manilua. Comprueba tu clave API.",manifestNotFoundOnMirror:"El manifiesto para {name} ({appid}) no se encontró en el espejo {source}.",couldNotDetermineAppidFromMessage:"No se pudo determinar el AppID del mensaje.",maniluaRequiresApiKey:"El espejo Manilua requiere una clave API válida.",dlcAdded:"Se añadieron {count} DLC a {target}.",apiKeyNotConfigured:"La clave API no está configurada.",apiKeyRequired:"La clave API es obligatoria.",apiKeyMustStartWith:"La clave API debe comenzar con {prefix}.",apiKeyValidationFailed:"La validación de la clave API falló.",apiKeySaved:"Clave API guardada.",unexpectedValidationResponse:"Respuesta inesperada al validar la clave API.",apiKeyInvalid:"La clave API no es válida.",apiKeyRejected:"La clave API fue rechazada por el servicio Manilua.",validationRequestFailed:"La solicitud de validación falló con HTTP {status}.",validationException:"La validación de la clave API falló: {error}"},compat:{works:"Funciona",mayNotWork:"Puede no funcionar",needsBypass:"Necesita bypass",drmDetected:"DRM detectado (Denuvo, etc.)",accountRequired:"Requiere cuenta de terceros",onlineOnly:"Solo en línea",hasOnline:"Tiene funciones en línea"},settings:{title:"Configuración",vtDescription:"Escanear archivos descargados en busca de malware antes de la instalación. Obtén tu clave API gratuita en virustotal.com",vtPlaceholder:"Introduce la clave API de VirusTotal...",vtEnabled:"Clave introducida",vtDisabled:"Clave incorrecta",vtNotConfigured:"Clave no introducida",vtInvalidKey:"Formato de clave inválido (se requieren 64 caracteres)"}},fr:{common:{ok:"OK",cancel:"Annuler",removeAllDlc:"Supprimer tous les DLC",remove:"Retirer",errorWithMessage:"Erreur : {message}"},buttons:{addToLibrary:"Ajouter à la bibliothèque",editDlcLibrary:"Modifier les DLC de la bibliothèque",removeFromLibrary:"Retirer de la bibliothèque",loading:"Chargement...",adding:"Ajout en cours...",removing:"Retrait en cours..."},errors:{manifestMissing:"Manifeste introuvable sur les miroirs publics. Demandez un accès manuel.",failedAddSelectedDlc:"Impossible d'ajouter les DLC sélectionnés.",failedInstallBaseGame:"Impossible d'installer le jeu de base.",failedFetchInfo:"Impossible de récupérer les informations du jeu.",failedRemoveGame:"Impossible de retirer le jeu !"},alerts:{addingFailedTitle:"Échec de l'ajout",unableAddTitle:"Impossible d'ajouter le jeu",unableGetDlcTitle:"Impossible d'obtenir la liste des DLC",unableRemoveTitle:"Impossible de retirer",noDlcTitle:"Aucun DLC disponible"},messages:{changesApplied:"Modifications appliquées.",gameAdded:"Jeu ajouté avec succès !",gameRemoved:"Jeu retiré avec succès !",noDlcDetails:"Ce jeu n'a pas de DLC à installer."},dialogs:{selectDlc:{title:"Sélectionner les DLC à ajouter",subtitle:"Sélectionnez les DLC à ajouter. Décochez ceux que vous ne voulez pas.",selectAll:"Tout sélectionner",confirm:"Appliquer la sélection",alreadyAdded:"déjà ajouté"},baseInstall:{title:"Ajouter à la bibliothèque",message:"Ce jeu n'a aucun DLC. Voulez-vous l'ajouter à votre bibliothèque ?",confirm:"Ajouter le jeu"},restart:{title:"Redémarrer Steam",message:"{details} Steam doit redémarrer. Redémarrer maintenant ?",confirm:"Redémarrer maintenant",cancel:"Plus tard"},remove:{title:"Retirer de la bibliothèque",message:"Êtes-vous sûr de vouloir retirer ce jeu de votre bibliothèque ?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparation des fichiers...",downloading:"Téléchargement et analyse...",merging:"Fusion des selections de DLC...",removing:"Retrait de la bibliotheque...",success:"Termine !",failure:"L'operation a echoue."},mirrors:{title:"Choisissez la source de telechargement",default:"Miroir public (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API Manilua (en cours de developpement)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API Manilua (cle requise)"},auth:{title:"Cle API Manilua",instructions:"Saisissez votre cle API Manilua. Vous pouvez l'obtenir depuis le tableau de bord Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Exemple : manilua_abc123...",save:"Enregistrer",saving:"Enregistrement...",required:"La cle est obligatoire.",invalid:"Cle invalide. Veuillez reessayer.",validationFailed:"La validation de la cle a echoue. Verifiez la cle et reessayez.",error:"Erreur de validation"},backend:{manifestAlreadyExists:"Le manifeste existe déjà",manifestNotAvailablePublic:"Le manifeste pour {name} ({appid}) n'est pas disponible sur les miroirs publics.",manifestNotAvailablePublicNoName:"Le manifeste pour {appid} n'est pas disponible sur les miroirs publics.",manifestSavedNoJson:"Manifeste enregistré dans {target} (sans traitement JSON)",manifestSaved:"Manifeste enregistré dans {target}",couldNotDetermineAppid:"Impossible de déterminer l'AppID.",manifestNotAvailableManilua:"Le manifeste pour {name} ({appid}) n'est pas disponible via le miroir Manilua. Vérifiez votre clé API.",manifestNotAvailableManiluaNoName:"Le manifeste pour {appid} n'est pas disponible via le miroir Manilua. Vérifiez votre clé API.",manifestNotFoundManilua:"Le manifeste pour {name} ({appid}) est introuvable sur le miroir Manilua.",manifestNotFoundManiluaNoName:"Le manifeste pour {appid} est introuvable sur le miroir Manilua.",apiKeyRejectedManilua:"La clé API a été rejetée par le miroir Manilua. Vérifiez votre clé API.",manifestNotFoundOnMirror:"Le manifeste pour {name} ({appid}) introuvable sur le miroir {source}.",couldNotDetermineAppidFromMessage:"Impossible de déterminer l'AppID du message.",maniluaRequiresApiKey:"Le miroir Manilua nécessite une clé API valide.",dlcAdded:"{count} DLC ajoutés à {target}.",apiKeyNotConfigured:"La clé API n'est pas configurée.",apiKeyRequired:"La clé API est obligatoire.",apiKeyMustStartWith:"La clé API doit commencer par {prefix}.",apiKeyValidationFailed:"La validation de la clé API a échoué.",apiKeySaved:"Clé API enregistrée.",unexpectedValidationResponse:"Réponse inattendue lors de la validation de la clé API.",apiKeyInvalid:"La clé API n'est pas valide.",apiKeyRejected:"La clé API a été rejetée par le service Manilua.",validationRequestFailed:"La demande de validation a échoué avec HTTP {status}.",validationException:"La validation de la clé API a échoué : {error}"},compat:{works:"Fonctionne",mayNotWork:"Peut ne pas fonctionner",needsBypass:"Contournement nécessaire",drmDetected:"DRM détecté (Denuvo, etc.)",accountRequired:"Compte tiers requis",onlineOnly:"En ligne uniquement",hasOnline:"Fonctionnalités en ligne"},settings:{title:"Paramètres",vtDescription:"Analyser les fichiers téléchargés pour détecter les malwares avant installation. Obtenez votre clé API gratuite sur virustotal.com",vtPlaceholder:"Entrez la clé API VirusTotal...",vtEnabled:"Clé saisie",vtDisabled:"Clé incorrecte",vtNotConfigured:"Clé non saisie",vtInvalidKey:"Format de clé invalide (64 caractères requis)"}},"pt-BR":{common:{ok:"OK",cancel:"Cancelar",removeAllDlc:"Remover todos os DLC",remove:"Remover",errorWithMessage:"Erro: {message}"},buttons:{addToLibrary:"Adicionar à biblioteca",editDlcLibrary:"Editar biblioteca de DLC",removeFromLibrary:"Remover da biblioteca",loading:"Carregando...",adding:"Adicionando...",removing:"Removendo..."},errors:{manifestMissing:"Manifesto indisponível nos espelhos públicos. Solicite acesso manual.",failedAddSelectedDlc:"Não foi possível adicionar os DLC selecionados.",failedInstallBaseGame:"Não foi possível instalar o jogo base.",failedFetchInfo:"Não foi possível obter as informações do jogo.",failedRemoveGame:"Não foi possível remover o jogo!"},alerts:{addingFailedTitle:"Falha ao adicionar",unableAddTitle:"Não foi possível adicionar o jogo",unableGetDlcTitle:"Não foi possível obter a lista de DLC",unableRemoveTitle:"Não foi possível remover",noDlcTitle:"Nenhum DLC disponível"},messages:{changesApplied:"Alterações aplicadas.",gameAdded:"Jogo adicionado com sucesso!",gameRemoved:"Jogo removido com sucesso!",noDlcDetails:"Este jogo não possui DLC para instalar."},dialogs:{selectDlc:{title:"Selecione os DLC para adicionar",subtitle:"Selecione os DLC que deseja adicionar. Desmarque os que não quiser.",selectAll:"Selecionar todos os DLC",confirm:"Aplicar seleção",alreadyAdded:"já adicionado"},baseInstall:{title:"Adicionar à biblioteca",message:"Este jogo não possui DLC. Deseja adicioná-lo à sua biblioteca?",confirm:"Adicionar jogo"},restart:{title:"Reiniciar Steam",message:"{details} A Steam precisa reiniciar. Reiniciar agora?",confirm:"Reiniciar agora",cancel:"Depois"},remove:{title:"Remover da biblioteca",message:"Tem certeza de que deseja remover este jogo da sua biblioteca?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Preparando arquivos...",downloading:"Baixando e verificando...",merging:"Mesclando selecao de DLC...",removing:"Removendo da biblioteca...",success:"Concluido!",failure:"A operacao falhou."},mirrors:{title:"Escolha a fonte de download",default:"Espelho público (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API Manilua (em desenvolvimento)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API Manilua (requer chave)"},auth:{title:"Chave da API Manilua",instructions:"Informe sua chave da API Manilua. Voce pode obtela no painel do Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Exemplo: manilua_abc123...",save:"Salvar",saving:"Salvando...",required:"A chave e obrigatoria.",invalid:"Chave invalida. Tente novamente.",validationFailed:"Falha na validacao da chave. Verifique a chave e tente novamente.",error:"Erro de validacao"},backend:{manifestAlreadyExists:"O manifesto já existe",manifestNotAvailablePublic:"O manifesto para {name} ({appid}) não está disponível nos espelhos públicos.",manifestNotAvailablePublicNoName:"O manifesto para {appid} não está disponível nos espelhos públicos.",manifestSavedNoJson:"Manifesto salvo em {target} (sem processamento JSON)",manifestSaved:"Manifesto salvo em {target}",couldNotDetermineAppid:"Não foi possível determinar o AppID.",manifestNotAvailableManilua:"O manifesto para {name} ({appid}) não está disponível através do espelho Manilua. Verifique sua chave API.",manifestNotAvailableManiluaNoName:"O manifesto para {appid} não está disponível através do espelho Manilua. Verifique sua chave API.",manifestNotFoundManilua:"O manifesto para {name} ({appid}) não foi encontrado no espelho Manilua.",manifestNotFoundManiluaNoName:"O manifesto para {appid} não foi encontrado no espelho Manilua.",apiKeyRejectedManilua:"A chave API foi rejeitada pelo espelho Manilua. Verifique sua chave API.",manifestNotFoundOnMirror:"O manifesto para {name} ({appid}) não foi encontrado no espelho {source}.",couldNotDetermineAppidFromMessage:"Não foi possível determinar o AppID da mensagem.",maniluaRequiresApiKey:"O espelho Manilua requer uma chave API válida.",dlcAdded:"{count} DLC adicionados a {target}.",apiKeyNotConfigured:"A chave API não está configurada.",apiKeyRequired:"A chave API é obrigatória.",apiKeyMustStartWith:"A chave API deve começar com {prefix}.",apiKeyValidationFailed:"A validação da chave API falhou.",apiKeySaved:"Chave API salva.",unexpectedValidationResponse:"Resposta inesperada ao validar a chave API.",apiKeyInvalid:"A chave API não é válida.",apiKeyRejected:"A chave API foi rejeitada pelo serviço Manilua.",validationRequestFailed:"A solicitação de validação falhou com HTTP {status}.",validationException:"A validação da chave API falhou: {error}"},compat:{works:"Funciona",mayNotWork:"Pode não funcionar",needsBypass:"Precisa de bypass",drmDetected:"DRM detectado (Denuvo, etc.)",accountRequired:"Requer conta de terceiros",onlineOnly:"Apenas online",hasOnline:"Tem recursos online"},settings:{title:"Configurações",vtDescription:"Verificar arquivos baixados em busca de malware antes da instalação. Obtenha sua chave API gratuita em virustotal.com",vtPlaceholder:"Digite a chave API do VirusTotal...",vtEnabled:"Chave inserida",vtDisabled:"Chave incorreta",vtNotConfigured:"Chave não inserida",vtInvalidKey:"Formato de chave inválido (64 caracteres necessários)"}},uk:{common:{ok:"OK",cancel:"Скасувати",save:"Зберегти",saving:"Збереження...",removeAllDlc:"Видалити всі DLC",remove:"Видалити",errorWithMessage:"Помилка: {message}"},buttons:{addToLibrary:"Додати до бібліотеки",editDlcLibrary:"Редагувати DLC у бібліотеці",removeFromLibrary:"Видалити з бібліотеки",loading:"Завантаження...",adding:"Додавання...",removing:"Видалення..."},errors:{manifestMissing:"Маніфест недоступний на публічних дзеркалах. Запросіть доступ вручну.",failedAddSelectedDlc:"Не вдалося додати обрані DLC.",failedInstallBaseGame:"Не вдалося встановити базову гру.",failedFetchInfo:"Не вдалося отримати інформацію про гру.",failedRemoveGame:"Не вдалося видалити гру!"},alerts:{addingFailedTitle:"Помилка додавання",unableAddTitle:"Неможливо додати гру",unableGetDlcTitle:"Неможливо отримати список DLC",unableRemoveTitle:"Неможливо видалити",noDlcTitle:"Немає доступних DLC"},messages:{changesApplied:"Зміни застосовано.",gameAdded:"Гру успішно додано!",gameRemoved:"Гру успішно видалено!",noDlcDetails:"Ця гра не має DLC для встановлення."},dialogs:{selectDlc:{title:"Оберіть DLC для додавання",subtitle:"Оберіть DLC, які хочете додати. Зніміть позначки з непотрібних.",selectAll:"Вибрати всі DLC",confirm:"Застосувати вибір",alreadyAdded:"вже додано"},baseInstall:{title:"Додати до бібліотеки",message:"У цієї гри немає DLC. Додати її до вашої бібліотеки?",confirm:"Додати гру"},restart:{title:"Перезапустити Steam",message:"{details} Потрібно перезапустити Steam. Зробити це зараз?",confirm:"Перезапустити",cancel:"Пізніше"},remove:{title:"Видалити з бібліотеки",message:"Ви впевнені, що хочете видалити цю гру з бібліотеки?"}},labels:{dlcWithId:"DLC {id}"},status:{preparing:"Підготовка файлів...",downloading:"Завантаження та перевірка...",merging:"Застосування обраних DLC...",removing:"Видалення з бібліотеки...",success:"Готово!",failure:"Операція не вдалася."},mirrors:{title:"Оберіть джерело завантаження",default:"Публічне дзеркало (ManifestHub)",ryuu:"Ryuu",maniluaUnderConstruction:"API Manilua (у розробці)",maniluaDisabled:"",kernelos:"KernelOS",manilua:"API Manilua (потрібен ключ)"},auth:{title:"API-ключ Manilua",instructions:"Введіть свій API-ключ Manilua. Його можна отримати в кабінеті Manilua.",placeholder:"manilua_xxxxxxxxxxxxxxxxx",example:"Приклад: manilua_abc123...",save:"Зберегти",saving:"Збереження...",required:"Необхідно вказати ключ.",invalid:"Ключ недійсний. Спробуйте ще раз.",validationFailed:"Перевірка API-ключа не вдалася. Перевірте ключ і спробуйте знову.",error:"Помилка перевірки"},backend:{manifestAlreadyExists:"Маніфест вже існує",manifestNotAvailablePublic:"Маніфест для {name} ({appid}) недоступний на публічних дзеркалах.",manifestNotAvailablePublicNoName:"Маніфест для {appid} недоступний на публічних дзеркалах.",manifestSavedNoJson:"Маніфест збережено в {target} (без обробки JSON)",manifestSaved:"Маніфест збережено в {target}",couldNotDetermineAppid:"Не вдалося визначити AppID.",manifestNotAvailableManilua:"Маніфест для {name} ({appid}) недоступний через дзеркало Manilua. Перевірте свій API-ключ.",manifestNotAvailableManiluaNoName:"Маніфест для {appid} недоступний через дзеркало Manilua. Перевірте свій API-ключ.",manifestNotFoundManilua:"Маніфест для {name} ({appid}) не знайдено на дзеркалі Manilua.",manifestNotFoundManiluaNoName:"Маніфест для {appid} не знайдено на дзеркалі Manilua.",apiKeyRejectedManilua:"Ключ API відхилено дзеркалом Manilua. Перевірте свій API-ключ.",manifestNotFoundOnMirror:"Маніфест для {name} ({appid}) не знайдено на дзеркалі {source}.",couldNotDetermineAppidFromMessage:"Не вдалося визначити AppID з повідомлення.",maniluaRequiresApiKey:"Дзеркало Manilua потребує дійсний API-ключ.",dlcAdded:"Додано {count} DLC до {target}.",apiKeyNotConfigured:"API-ключ не налаштовано.",apiKeyRequired:"Необхідно вказати API-ключ.",apiKeyMustStartWith:"API-ключ має починатися з {prefix}.",apiKeyValidationFailed:"Перевірка API-ключа не вдалася.",apiKeySaved:"API-ключ збережено.",unexpectedValidationResponse:"Неочікувана відповідь при перевірці API-ключа.",apiKeyInvalid:"API-ключ недійсний.",apiKeyRejected:"API-ключ відхилено сервісом Manilua.",validationRequestFailed:"Запит перевірки не вдався з HTTP {status}.",validationException:"Перевірка API-ключа не вдалася: {error}",manifestNotAvailableRyuu:"Маніфест для {name} ({appid}) недоступний через дзеркало Ryuu.",manifestNotAvailableRyuuNoName:"Маніфест для {appid} недоступний через дзеркало Ryuu.",manifestNotFoundRyuu:"Маніфест для {name} ({appid}) не знайдено на дзеркалі Ryuu.",manifestNotFoundRyuuNoName:"Маніфест для {appid} не знайдено на дзеркалі Ryuu."},compat:{works:"Працює",mayNotWork:"Може не працювати",needsBypass:"Потрібен обхід",drmDetected:"Виявлено DRM (Denuvo та ін.)",accountRequired:"Потрібен сторонній акаунт",onlineOnly:"Тільки онлайн",hasOnline:"Є онлайн-функції"},settings:{title:"Налаштування",vtDescription:"Перевіряти завантажені файли на віруси перед встановленням. Отримайте безкоштовний API-ключ на virustotal.com",vtPlaceholder:"Введіть API-ключ VirusTotal...",vtEnabled:"Ключ введено",vtDisabled:"Ключ невірний",vtNotConfigured:"Ключ не введено",vtInvalidKey:"Невірний формат ключа (потрібно 64 символи)"}}};function u(e){if(!e||"string"!=typeof e)return d;var t=e.trim();if(!t)return d;var a=t.toLowerCase();if("pt-br"===a||"pt_br"===a)return"pt-BR";if(a.startsWith("en"))return"en";if(a.startsWith("es"))return"es";if(a.startsWith("fr"))return"fr";if("ua"===a||a.startsWith("uk"))return"uk";if("ukrainian"===a)return"uk";var i=a.split(/[-_]/)[0],n=Object.keys(c).find(function(e){return e.toLowerCase()===i});return null!=n?n:d}var p=function(){return function(e,t){return t&&function(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.translations=new Map,this.currentLocale=d,this.initialised=!1,this.initPromise=null},[{key:"init",value:(t=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:if(!this.initialised){e.n=1;break}return e.a(2);case 1:return this.initPromise||(this.initPromise=this.bootstrap()),e.n=2,this.initPromise;case 2:this.initialised=!0;case 3:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"t",value:function(e,t){var a,i,n=null!==(a=null!==(i=this.lookup(this.currentLocale,e))&&void 0!==i?i:this.lookup(d,e))&&void 0!==a?a:e;return"string"!=typeof n?e:t?n.replace(/\{(.*?)\}/g,function(e,a){var i=t[a.trim()];return null==i?"":String(i)}):n}},{key:"bootstrap",value:(e=i(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:if(t=u(this.detectPreferredLocale()),this.loadLocale(t),this.translations.has(t)||t===d){e.n=1;break}return this.loadLocale(d),this.currentLocale=d,e.a(2);case 1:this.currentLocale=t;case 2:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"detectPreferredLocale",value:function(){var e=[];if("undefined"!=typeof window){var t,a,i,n,o=(null===(t=window)||void 0===t?void 0:t.g_strLanguage)||(null===(a=window)||void 0===a||null===(a=a.LocalizationManager)||void 0===a?void 0:a.m_strLanguage)||(null===(i=window)||void 0===i||null===(i=i.SteamClient)||void 0===i||null===(i=i.System)||void 0===i||null===(n=i.GetSteamUILanguage)||void 0===n?void 0:n.call(i));o&&e.push(o)}"undefined"!=typeof navigator&&(Array.isArray(navigator.languages)&&e.push.apply(e,r(navigator.languages)),navigator.language&&e.push(navigator.language),navigator.userLanguage&&e.push(navigator.userLanguage));var l=e.find(function(e){return u(e)!==d||e===d});return null!=l?l:d}},{key:"loadLocale",value:function(e){if(!this.translations.has(e)){var t=c[e];t&&this.translations.set(e,t)}}},{key:"lookup",value:function(e,t){var a=this.translations.get(e);if(a)return t.split(".").reduce(function(e,t){if(e&&"object"===s(e)&&!Array.isArray(e))return e[t]},a)}}]);var e,t}(),m=new p;function f(){return(f=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m.init();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function y(e,t){return m.t(e,t)}let g=null;const v=__wrapped_callable__("Backend.get_dlc_list"),b=__wrapped_callable__("Backend.install_dlcs"),h=__wrapped_callable__("Backend.delete_lua"),A=__wrapped_callable__("Backend.checkpirated"),x=__wrapped_callable__("Backend.restart"),I=__wrapped_callable__("Backend.set_manilua_api_key"),L=__wrapped_callable__("Backend.get_manilua_api_status"),C=__wrapped_callable__("Backend.set_vt_api_key"),N=__wrapped_callable__("Backend.get_vt_api_status");let w=!1;const M={hasKey:!1,isValid:!1,maskedKey:"",checked:!1},D="steam-app-inserter-compat-badge",_=["denuvo","securom","secucrom","arxan","vmprotect","requires 3rd-party drm","third-party drm","3rd-party drm","drittanbieter-drm","drm tiers","gestion des droits numériques tiers","drm de terceros","drm di terze parti","drm de terceiros","drm innego producenta","system drm innego producenta","стороння система захисту","drm стороннього виробника","サードパーティーのdrm","타사 drm","第三方 drm","第三方drm"],E=["ea account","ea app","ea play","ubisoft connect","uplay","rockstar social club","rockstar games launcher","battle.net","bethesda.net","2k account","epic account","riot account","requires 3rd-party account","3rd-party account","third-party account","drittanbieteraccount","drittanbieter-account","konto eines drittanbieters","compte tiers","nécessite un compte tiers","cuenta de terceros","requiere cuenta de terceros","account di terze parti","conta de terceiros","konto na platformie firmy zewnętrznej","konto firmy trzeciej","обліковий запис сторонньої компанії","сторонній обліковий запис","サードパーティーのアカウント","타사 계정","第三方帐户","第三方账户"],P=e=>{try{return(e||"").toString().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase()}catch{return(e||"").toString().toLowerCase()}},k=e=>{const t=[],a=new Set;for(const i of e){const e=P(i).trim();e&&(a.has(e)||(a.add(e),t.push(e)))}return t},S=e=>{document.getElementById(D)?.remove(),(()=>{if(document.getElementById("steam-app-inserter-compat-css"))return;const e=document.createElement("style");e.id="steam-app-inserter-compat-css",e.textContent="\n        .sai-compat-badge {\n            display: inline-flex;\n            align-items: center;\n            gap: 8px;\n            font-size: 12px;\n            line-height: 16px;\n            padding: 4px 12px;\n            border-radius: 3px;\n            background: rgba(0, 0, 0, 0.4);\n            border: 1px solid rgba(255, 255, 255, 0.15);\n            user-select: none;\n            cursor: help;\n            margin-right: 6px;\n            font-family: \"Motiva Sans\", Arial, sans-serif;\n            position: relative;\n        }\n        .sai-compat-dot {\n            width: 8px;\n            height: 8px;\n            border-radius: 50%;\n            flex-shrink: 0;\n        }\n        .sai-compat-text {\n            color: #c6d4df;\n        }\n        .sai-compat-tooltip {\n            position: absolute !important;\n            top: calc(100% + 8px) !important;\n            left: 50% !important;\n            transform: translateX(-50%) !important;\n            background: #171a21 !important;\n            border: 1px solid rgba(255, 255, 255, 0.2) !important;\n            border-radius: 4px !important;\n            padding: 10px 14px !important;\n            min-width: 200px !important;\n            max-width: 320px !important;\n            width: max-content !important;\n            height: auto !important;\n            max-height: none !important;\n            overflow: visible !important;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5) !important;\n            opacity: 0;\n            visibility: hidden;\n            transition: opacity 0.2s, visibility 0.2s;\n            z-index: 10000 !important;\n            pointer-events: none;\n            white-space: normal !important;\n            word-wrap: break-word !important;\n            text-align: left !important;\n            display: block !important;\n        }\n        .sai-compat-badge:hover .sai-compat-tooltip {\n            opacity: 1;\n            visibility: visible;\n        }\n        .sai-compat-tooltip::after {\n            content: '';\n            position: absolute;\n            bottom: 100%;\n            left: 50%;\n            transform: translateX(-50%);\n            border: 6px solid transparent;\n            border-bottom-color: #171a21;\n        }\n        .sai-compat-tooltip-title {\n            font-size: 13px !important;\n            font-weight: 500 !important;\n            color: #ffffff !important;\n            display: block !important;\n            white-space: normal !important;\n        }\n        .sai-compat-tooltip-title.has-items {\n            margin-bottom: 8px;\n            padding-bottom: 6px;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n        .sai-compat-tooltip-item {\n            font-size: 12px !important;\n            color: #acb2b8 !important;\n            line-height: 1.5 !important;\n            padding: 3px 0 !important;\n            display: flex !important;\n            align-items: flex-start !important;\n            gap: 8px !important;\n            white-space: normal !important;\n            overflow: visible !important;\n            height: auto !important;\n        }\n        .sai-compat-tooltip-item::before {\n            content: '•';\n            color: #67707b;\n            flex-shrink: 0;\n        }\n    ",document.head.appendChild(e)})();const t=(()=>{const{tags:e,specs:t,noticesText:a}=(()=>{const e=document.querySelectorAll(".glance_tags .app_tag, .popular_tags .app_tag, #category_block a, #category_block .label"),t=document.querySelectorAll(".game_area_details_specs a, .game_area_details_specs li, .game_area_features_list li"),a=document.querySelectorAll(".DRM_notice, .game_meta_data, .glance_ctn, .game_area_purchase");return{tags:k(Array.from(e).map(e=>e.textContent||"")),specs:k(Array.from(t).map(e=>e.textContent||"")),noticesText:P(Array.from(a).map(e=>e.textContent||"").join(" \n "))}})(),i=["online pvp","online co-op","co-op online","multiplayer online","massively multiplayer","mmo","mmorpg","cross-platform multiplayer","crossplay","cross-play","requires internet connection","always online","live service","games as a service","pvp","multiplayer","багатокористувацька","гравець проти гравця","гравець проти оточення","мережева гра","кооператив","online-koop","mehrspieler","plattformübergreifender mehrspieler","koop","coop en ligne","multijoueur","jcj","cooperativos en línea","cooperativo en línea","multijugador","co-op online","multigiocatore","cooperativo on-line","multijogador","jogador x jogador","co-op online","baseado em equipas","sieciowa kooperacja","kooperacja","wieloosobowe","wieloosobowa","çok oyunculu","çevrimiçi eşli oyun","eşli","pro více hráčů","online kooperativní","kooperativní","többjátékos","online együttműködő","együttműködő","onlineco-op","online co-op","holdbaseret","co-op online","lagbaserat","moninpeli","verkkoyhteistyöpeli","yhteistyö","flerspiller","samarbeid på nett","samarbeid","lagbasert","mai mulți jucători","cooperativ online","cooperativ","мрежови","кооперативни на линия","кооперативни","играч срещу играч","πολλών παικτών","διαδικτυακό συνεργατικό","συνεργατικό","اللعب الجماعي","تعاون عبر الإنترنت","تعاون","لاعب ضد لاعب","ผู้เล่นหลายคน","เล่นแบบร่วมมือกันออนไลน์","เล่นแบบร่วมมือกัน","chơi nhiều người","phối hợp trên mạng","phối hợp","マルチプレイヤー","オンライン協力プレイ","協力プレイ","対戦","クロスプラットフォームマルチプレイヤー","멀티플레이어","온라인 협동","협동","크로스 플랫폼 멀티플레이어","多人","在线合作","玩家对战","跨平台多人","線上合作","玩家對戰","跨平台多人"],n=(e,t)=>e.some(e=>t.some(t=>e.includes(t))),o=n(e,i)||n(t,i),r=_.some(e=>a.includes(e)),l=E.some(e=>a.includes(e))||n(e,E)||n(t,E);let s="ok";const d=[];return r&&(s="bad",d.push(y("compat.drmDetected"))),l&&("bad"!==s&&(s="warn"),d.push(y("compat.accountRequired"))),o&&("bad"!==s&&(s="warn"),d.push(y("compat.hasOnline"))),{level:s,label:{ok:y("compat.works"),warn:y("compat.mayNotWork"),bad:y("compat.needsBypass")}[s],color:{ok:"#5c7e10",warn:"#a0790b",bad:"#a0352c"}[s],reasons:d}})(),a=document.createElement("div");a.id=D,a.className="sai-compat-badge";const i=document.createElement("span");i.className="sai-compat-dot",i.style.background=t.color;const n=document.createElement("span");n.className="sai-compat-text",n.textContent=t.label;const o=document.createElement("div");o.className="sai-compat-tooltip";const r=document.createElement("div");r.className="sai-compat-tooltip-title"+(t.reasons.length>0?" has-items":""),r.textContent=t.label,o.appendChild(r),t.reasons.length>0&&t.reasons.forEach(e=>{const t=document.createElement("div");t.className="sai-compat-tooltip-item",t.textContent=e,o.appendChild(t)}),a.appendChild(i),a.appendChild(n),a.appendChild(o),e.insertBefore(a,e.firstChild)},R=(e,t="primary")=>{const a=document.createElement("button");return a.type="button",a.className="primary"===t?"btnv6_blue_hoverfade btn_medium":"btnv6_lightblue_blue btn_medium",a.textContent=e,a.style.display="inline-flex",a.style.justifyContent="center",a.style.alignItems="center",a.style.minWidth="170px",a.style.padding="0 28px",a.style.minHeight="32px",a.style.boxSizing="border-box",a},T=e=>new Promise(t=>{window.setTimeout(t,Math.max(0,e))}),j=(e,t)=>{if(!document.body)throw new Error("Document body not ready for dialog rendering.");const a=document.createElement("div");a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.background="rgba(0, 0, 0, 0.65)",a.style.zIndex="9999",a.style.display="flex",a.style.alignItems="flex-start",a.style.justifyContent="center",a.style.paddingTop="8vh";const i=document.createElement("div");i.style.background="#171a21",i.style.color="#ffffff",i.style.padding="24px",i.style.borderRadius="8px",i.style.maxWidth="520px",i.style.width="calc(100% - 48px)",i.style.boxShadow="0 12px 48px rgba(0, 0, 0, 0.45)",i.style.fontFamily='"Motiva Sans", Arial, sans-serif',i.style.outline="none",i.tabIndex=-1;const n=document.createElement("h2");if(n.textContent=e,n.style.margin="0 0 8px 0",i.appendChild(n),t){const e=document.createElement("p");e.textContent=t,e.style.marginTop="0",e.style.fontSize="14px",e.style.opacity="0.85",i.appendChild(e)}const o=document.createElement("div");o.style.margin="16px 0",i.appendChild(o);const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="flex-end",r.style.gap="12px",r.style.marginTop="16px",r.style.paddingTop="16px",i.appendChild(r),a.appendChild(i),document.body.appendChild(a);const l=e=>e.stopPropagation();i.addEventListener("click",l);let s=!1;return a.addEventListener("click",()=>{}),requestAnimationFrame(()=>{i.focus()}),{overlay:a,dialog:i,content:o,actions:r,close:()=>{if(!s){s=!0,i.removeEventListener("click",l);try{a.remove()}catch{const e=a.parentNode;e&&e.removeChild(a)}}}}},K=async(e,t)=>{document.body?await new Promise(a=>{const{dialog:i,content:n,actions:o,close:r}=j(e),l=document.createElement("p");l.textContent=t,l.style.margin="0",l.style.fontSize="14px",l.style.opacity="0.85",n.appendChild(l);let s=!1;const d=()=>{s||(s=!0,r(),a())},c=R(y("common.ok"),"primary");c.addEventListener("click",d),o.appendChild(c),i.addEventListener("keydown",e=>{"Escape"!==e.key&&("Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey)||(e.preventDefault(),d())}),requestAnimationFrame(()=>c.focus())}):alert(`${e}\n\n${t}`)},O=async({title:e,message:t,confirmLabel:a=y("common.ok"),cancelLabel:i=y("common.cancel")})=>document.body?await new Promise(n=>{const{dialog:o,content:r,actions:l,close:s}=j(e),d=document.createElement("p");d.textContent=t,d.style.margin="0",d.style.fontSize="14px",d.style.opacity="0.85",r.appendChild(d);let c=!1;const u=e=>{c||(c=!0,s(),n(e))},p=R(i,"secondary");p.addEventListener("click",()=>u(!1));const m=R(a,"primary");m.addEventListener("click",()=>u(!0)),l.appendChild(p),p.addEventListener("click",()=>u(!1)),l.appendChild(m),o.addEventListener("keydown",e=>{"Escape"===e.key?(e.preventDefault(),u(!1)):"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||(e.preventDefault(),u(!0))}),requestAnimationFrame(()=>m.focus())}):confirm(t),F=(e,t="")=>"string"==typeof e&&e.trim().length?e.trim():"number"==typeof e?String(e):t,q=e=>{if(!e||"object"!=typeof e)return"";const t=e.message_code,a=e.message_params;return"string"==typeof t&&t.length>0?y(t,a||{}):F(e.details||e.message||e.error,"")},B={preparing:"status.preparing",downloading:"status.downloading",merging:"status.merging",removing:"status.removing",success:"status.success",failure:"status.failure"},V=(e="preparing")=>{if(!document?.body)return{setStatus:()=>{},close:()=>{}};const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0, 0, 0, 0.55)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="9999";const a=document.createElement("div");a.style.minWidth="260px",a.style.maxWidth="360px",a.style.padding="24px 28px",a.style.background="#171a21",a.style.borderRadius="6px",a.style.border="1px solid rgba(103, 193, 245, 0.45)",a.style.boxShadow="0 18px 48px rgba(0, 0, 0, 0.45)",a.style.color="#ffffff",a.style.fontFamily='"Motiva Sans", Arial, sans-serif',a.style.textAlign="center";const i=document.createElement("div");i.style.fontSize="15px",i.style.lineHeight="1.5",i.style.minHeight="40px",a.appendChild(i),t.appendChild(a),document.body.appendChild(t);let n=!1;const o=e=>{n||(i.textContent=y(B[e]))},r=()=>{try{t.remove()}catch{const e=t.parentNode;e&&e.removeChild(t)}};return o(e),{setStatus:o,close:(e,t=0)=>{n||(n=!0,e&&o(e),window.setTimeout(r,Math.max(0,t)))}}},G=[{id:"default",labelKey:"mirrors.default",requiresApiKey:!1},{id:"kernelos",labelKey:"mirrors.kernelos",requiresApiKey:!1}],z=e=>{if(e&&"object"==typeof e&&!Array.isArray(e)){const t=e,a=!1!==t.success,i=q(t)||void 0;return{success:a,message:i,error:!a&&i?i:void 0}}if("boolean"==typeof e)return{success:e};if("string"==typeof e){const t=e.trim().toLowerCase();return"true"===t?{success:!0}:"false"===t?{success:!1}:{success:!0,message:e}}return{success:!1,error:"Unexpected response from backend."}},W=(e,t=!1)=>{if("boolean"==typeof e)return e;if("string"==typeof e){const a=e.trim();try{if(!a.startsWith("{")||!a.endsWith("}"))return"true"===a.toLowerCase()||"false"!==a.toLowerCase()&&t;e=JSON.parse(a)}catch{return t}}if(e&&"object"==typeof e&&!Array.isArray(e)){const t=e;if("boolean"==typeof t.configured)return t.configured;if("boolean"==typeof t.success)return t.success;if("boolean"==typeof t.isValid)return t.isValid;if("boolean"==typeof t.hasKey)return t.hasKey}return"boolean"==typeof e?e:t},U=async(e=!1)=>{if(e&&(M.checked=!1),M.checked)return{...M};try{const e=await L();let t=e;if("string"==typeof e){const a=e.trim();if(a.startsWith("{")&&a.endsWith("}"))try{t=JSON.parse(a)}catch{}}if(t&&"object"==typeof t&&!Array.isArray(t)){const a=t;M.hasKey=a.hasOwnProperty("hasKey")?Boolean(a.hasKey):W(e,!1),M.isValid=a.hasOwnProperty("isValid")?!1!==a.isValid:M.hasKey,M.maskedKey="string"==typeof a.maskedKey?a.maskedKey:"";const i=a.message??a.details;M.message="string"==typeof i?i:void 0}else{const t=W(e,!1);M.hasKey=t,M.isValid=t,M.maskedKey="",M.message=void 0}}catch(e){M.hasKey=!1,M.isValid=!1,M.maskedKey="",M.message=e instanceof Error?e.message:String(e)}return M.checked=!0,{...M}},H=async(e=g??"default")=>{if(!document?.body)return e;const t=new Set([]);return await new Promise(a=>{const{dialog:i,content:n,actions:o,close:r}=j(y("mirrors.title")),l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.gap="6px",l.style.marginBottom="12px";let s=e;G.forEach(e=>{const a=t.has(e.id),i=document.createElement("label");i.style.display="flex",i.style.alignItems="center",i.style.gap="10px",i.style.padding="6px 8px",i.style.border="1px solid rgba(255, 255, 255, 0.1)",i.style.borderRadius="4px",i.style.cursor=a?"not-allowed":"pointer",a&&(i.style.opacity="0.6");const n=document.createElement("input");n.type="radio",n.name="mirror-option",n.value=e.id,n.checked=e.id===s,n.disabled=a,a||n.addEventListener("change",()=>s=e.id);const o=document.createElement("div");o.textContent=y(e.labelKey),o.style.flex="1";const r=a?y("mirrors.maniluaDisabled"):e.requiresApiKey?y("auth.title"):"";if(i.appendChild(n),i.appendChild(o),r){const e=document.createElement("span");e.style.fontSize="11px",e.style.opacity="0.7",e.textContent=r,i.appendChild(e)}i.addEventListener("click",()=>{a||(n.checked=!0,s=e.id)}),l.appendChild(i)}),n.innerHTML="",n.appendChild(l);const d=R(y("common.cancel"),"secondary"),c=R(y("common.ok"),"primary");let u=!1;const p=e=>{u||(u=!0,r(),a(e))};d.onclick=e=>{e.preventDefault(),p(null)},c.onclick=async e=>{e.preventDefault();const a=G.find(e=>e.id===s);if(a)if(t.has(a.id))await K(y("mirrors.title"),y("mirrors.maniluaDisabled"));else{if(a.requiresApiKey&&"manilua"===a.id&&!await(async()=>{let e=await U();return!((!e.hasKey||!1===e.isValid)&&(e.hasKey&&!1===e.isValid&&await K(y("auth.title"),e.message??y("auth.validationFailed")),!await(async()=>!!document?.body&&await new Promise(e=>{const{dialog:t,content:a,actions:i,close:n}=j(y("auth.title"));a.innerHTML="";const o=document.createElement("div");o.style.marginBottom="12px",o.style.fontSize="14px",o.style.opacity="0.85",o.textContent=y("auth.instructions");const r=document.createElement("input");r.type="text",r.placeholder=y("auth.placeholder"),r.autocomplete="off",r.style.cssText=["width: 100%","padding: 8px 12px","background: rgba(0,0,0,0.35)","border: 1px solid #5c5c5c","border-radius: 3px","color: #ffffff","font-size: 14px","box-sizing: border-box"].join(";");const l=document.createElement("div");l.style.marginTop="8px",l.style.fontSize="12px",l.style.opacity="0.8",l.textContent=y("auth.example"),a.appendChild(o),a.appendChild(r),a.appendChild(l);const s=R(y("common.cancel"),"secondary"),d=R(y("auth.save"),"primary");let c=!1;const u=t=>{c||(c=!0,n(),e(t))},p=e=>{l.textContent=e,l.style.opacity="1",l.style.color="#ffa03b"};s.onclick=e=>{e.preventDefault(),u(!1)},d.onclick=async e=>{e.preventDefault();const t=r.value.trim();if(!t)return r.style.borderColor="#d94126",p(y("auth.required")),void r.focus();r.style.borderColor="",l.textContent=y("auth.example"),l.style.opacity="0.8",l.style.color="",d.disabled=!0,s.disabled=!0,d.textContent=y("auth.saving");try{const e=await I({api_key:t}),a=z(e);a.success?(M.hasKey=!0,M.isValid=!0,M.maskedKey=(e=>{const t=e.trim();if(!t.length)return"";if(t.length<=4)return"*".repeat(t.length);const a=t.slice(0,4),i=t.length>6?t.slice(-2):"",n=Math.max(0,t.length-a.length-i.length);return`${a}${"*".repeat(n)}${i}`})(t),M.message=a.message,M.checked=!0,u(!0)):(r.style.borderColor="#d94126",p(a.error||a.message||y("auth.invalid")))}catch(e){r.style.borderColor="#d94126";const t=e instanceof Error?e.message:String(e);p(`${y("auth.error")}: ${t}`)}finally{d.disabled=!1,s.disabled=!1,d.textContent=y("auth.save")}},i.appendChild(s),i.appendChild(d),t.addEventListener("keydown",e=>{"Escape"===e.key?(e.preventDefault(),u(!1)):"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||(e.preventDefault(),d.click())}),r.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||(e.preventDefault(),d.click())}),requestAnimationFrame(()=>r.focus())}))()||(await U(!0),e=await U(),(!e.hasKey||!1===e.isValid)&&(await K(y("auth.title"),e.message??y("auth.validationFailed")),1))))})())return;g=s,p(s)}},o.appendChild(d),o.appendChild(c),i.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),p(null))})})},J=e=>{if(!e||"object"!=typeof e)return null;const t=e,a=F(t.appid??t.appid);return a?{appid:a,name:F(t.name??t.name,`DLC ${a}`),alreadyInstalled:Boolean(t.alreadyInstalled??t.alreadyInstalled)}:null},$=e=>{if(e&&"object"==typeof e&&!Array.isArray(e)){const t=e,a=(Array.isArray(t.dlc)?t.dlc:[]).map(J).filter(e=>null!==e),i=Boolean(t.success);return{success:i,details:q(t)||(i?"":y("errors.manifestMissing")),dlc:a,appid:F(t.appid,void 0)}}if("string"==typeof e)try{const t=JSON.parse(e);return $(t)}catch{const t=e.toLowerCase().trim();return"true"===t?{success:!0,details:"",dlc:[]}:"false"===t?{success:!1,details:y("errors.manifestMissing"),dlc:[]}:{success:!1,details:e,dlc:[]}}return"boolean"==typeof e?{success:e,details:e?"":y("errors.manifestMissing"),dlc:[]}:{success:!1,details:y("errors.manifestMissing"),dlc:[]}},Y=e=>Array.isArray(e)?e.map(e=>F(e)).filter(e=>Boolean(e)):[],Q=e=>{if(e&&"object"==typeof e&&!Array.isArray(e)){const t=e;return{success:Boolean(t.success),details:q(t),installed:Y(t.installed),failed:Y(t.failed)}}if("string"==typeof e)try{const t=JSON.parse(e);return Q(t)}catch{const t=e.toLowerCase().trim();return"true"===t?{success:!0,details:void 0,installed:[],failed:[]}:"false"===t?{success:!1,details:void 0,installed:[],failed:[]}:{success:!1,details:e,installed:[],failed:[]}}return"boolean"==typeof e?{success:e,details:void 0,installed:[],failed:[]}:{success:!1,details:void 0,installed:[],failed:[]}},X="add-app-to-library-btn",Z="remove-app-from-library-btn",ee="steam-app-inserter-settings-btn",te={ADD_TO_LIBRARY:"buttons.addToLibrary",EDIT_DLC_LIBRARY:"buttons.editDlcLibrary",REMOVE_FROM_LIBRARY:"buttons.removeFromLibrary",LOADING:"buttons.loading",ADDING:"buttons.adding",REMOVING:"buttons.removing"},ae=e=>`<span>${y(te[e])}</span>`,ie=(e,t)=>{e.disabled=!1,e.innerHTML=ae(t?"EDIT_DLC_LIBRARY":"ADD_TO_LIBRARY")},ne=async(e,t)=>{await O({title:y("dialogs.restart.title"),message:y("dialogs.restart.message",{details:e}),confirmLabel:y("dialogs.restart.confirm"),cancelLabel:y("dialogs.restart.cancel")})?await x():await t()};return e.default=async function(){if(await function(){return f.apply(this,arguments)}(),!/^https:\/\/store\.steampowered\.com\/app\//.test(location.href))return;const e=()=>{const e=location.href.match(/\/app\/(\d+)/);return e?e[1]:null},t=async()=>{try{const a=await((e,t=2e4)=>new Promise((a,i)=>{const n=document.querySelector(e);if(n)return a(n);const o=new MutationObserver(()=>{const t=document.querySelector(e);t&&(o.disconnect(),a(t))});o.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout(()=>{o.disconnect(),i(new Error("timeout"))},t)}))(".apphub_OtherSiteInfo");S(a);const i=e();if(!i)return;const n=await A({id:i});document.getElementById(X)?.remove(),document.getElementById(Z)?.remove(),document.getElementById(ee)?.remove();const o=document.createElement("button");o.id=ee,o.type="button",o.className="btnv6_blue_hoverfade btn_medium",o.style.marginRight="3px",o.innerHTML="<span>⚙</span>",o.title=y("settings.title")||"Settings",o.addEventListener("click",async e=>{e.preventDefault(),await(async()=>{if(!document?.body)return;const e=await(async()=>{try{let e=await N();if("string"==typeof e)try{e=JSON.parse(e)}catch{}if(e&&"object"==typeof e){const t=e;return{hasKey:Boolean(t.hasKey),apiKey:String(t.apiKey||""),isEnabled:Boolean(t.isEnabled)}}}catch(e){console.error("Failed to get VT status:",e)}return{hasKey:!1,apiKey:"",isEnabled:!1}})();return new Promise(t=>{const{content:a,actions:i,close:n}=j(y("settings.title")||"Settings"),o=document.createElement("div");o.style.marginBottom="16px";const r=document.createElement("div");r.style.fontWeight="bold",r.style.marginBottom="8px",r.style.fontSize="14px",r.textContent="VirusTotal",o.appendChild(r);const l=document.createElement("div");l.style.fontSize="12px",l.style.color="#8f98a0",l.style.marginBottom="12px",l.textContent=y("settings.vtDescription")||"Scan downloaded files for malware before installation. Get your free API key at virustotal.com",o.appendChild(l);const s=document.createElement("div");s.style.display="flex",s.style.gap="8px",s.style.alignItems="center";const d=document.createElement("input");d.type="password",d.placeholder=y("settings.vtPlaceholder")||"Enter VirusTotal API key...",d.value=e.apiKey,d.style.flex="1",d.style.padding="8px 12px",d.style.background="#1a1d24",d.style.border="1px solid #3d4450",d.style.borderRadius="4px",d.style.color="#ffffff",d.style.fontSize="13px",s.appendChild(d);const c=document.createElement("span");c.style.fontSize="12px",c.style.whiteSpace="nowrap",e.isEnabled?(c.textContent="✓ "+(y("settings.vtEnabled")||"Enabled"),c.style.color="#5ba32b"):e.hasKey?(c.textContent="⚠ "+(y("settings.vtDisabled")||"Disabled"),c.style.color="#f0ad4e"):(c.textContent=y("settings.vtNotConfigured")||"Not configured",c.style.color="#8f98a0"),s.appendChild(c),o.appendChild(s),a.appendChild(o);const u=R(y("common.cancel"),"secondary"),p=R(y("common.save")||"Save","primary"),m=()=>{n(),t()};u.addEventListener("click",m),p.addEventListener("click",async()=>{const t=d.value.trim();if(t!==e.apiKey){if(t&&64!==t.length)return c.textContent="✗ "+(y("settings.vtInvalidKey")||"Invalid key format"),void(c.style.color="#d94040");try{p.disabled=!0,p.textContent=y("common.saving")||"Saving...";const e=await C({api_key:t}),a=z(e);a.success?(c.textContent=t?"✓ "+(y("settings.vtEnabled")||"Enabled"):y("settings.vtNotConfigured")||"Not configured",c.style.color=t?"#5ba32b":"#8f98a0",m()):(c.textContent="✗ "+(a.error||"Failed to save"),c.style.color="#d94040",p.disabled=!1,p.textContent=y("common.save")||"Save")}catch(e){c.textContent="✗ Error",c.style.color="#d94040",p.disabled=!1,p.textContent=y("common.save")||"Save"}}else m()}),i.appendChild(u),i.appendChild(p)})})()});const r=document.createElement("button");r.id=X,r.type="button",r.style.marginRight="3px",r.className="btnv6_blue_hoverfade btn_medium";let l=null;n?(l=document.createElement("button"),l.id=Z,l.type="button",l.style.marginRight="3px",l.className="btnv6_blue_hoverfade btn_medium",l.innerHTML=ae("REMOVE_FROM_LIBRARY"),l.addEventListener("click",async e=>{if(e.preventDefault(),!await O({title:y("dialogs.remove.title"),message:y("dialogs.remove.message"),confirmLabel:y("common.remove"),cancelLabel:y("common.cancel")}))return;l.disabled=!0,l.innerHTML=ae("REMOVING");const a=V("removing");try{a.setStatus("removing"),await h({id:i})?(a.close("success",600),await T(600),await ne(y("messages.gameRemoved"),t)):(a.close("failure",1200),await K(y("alerts.unableRemoveTitle"),y("errors.failedRemoveGame")),l.disabled=!1,l.innerHTML=ae("REMOVE_FROM_LIBRARY"))}catch(e){a.close("failure",1200);const t=e instanceof Error?e.message:String(e);await K(y("alerts.unableRemoveTitle"),y("common.errorWithMessage",{message:t})),l.disabled=!1,l.innerHTML=ae("REMOVE_FROM_LIBRARY")}}),r.innerHTML=ae("EDIT_DLC_LIBRARY")):r.innerHTML=ae("ADD_TO_LIBRARY"),r.addEventListener("click",async e=>{if(e.preventDefault(),w)return;const a=await(async()=>await H(g??"default"))();if(a){w=!0,r.disabled=!0,r.innerHTML=ae("LOADING");try{const e=await v({appid:i,mirror:a}),o=$(e);if(!o.success)return await K(y("alerts.unableGetDlcTitle"),o.details??y("errors.failedFetchInfo")),void ie(r,n);o.dlc&&o.dlc.length?await(async(e,t,a,i,n)=>{const o=n,r=await(async(e,t,a,i=!1)=>{const n=t.map(J).filter(e=>null!==e);return!(!n.length||!document.body)&&await new Promise(t=>{const{dialog:o,content:r,actions:l,close:s}=j(y("dialogs.selectDlc.title"),y("dialogs.selectDlc.subtitle"));r.style.margin="0";const d=document.createElement("div");d.style.maxHeight="40vh",d.style.overflowY="auto",d.style.margin="16px 0",d.style.paddingRight="8px",r.appendChild(d);const c=[],u=document.createElement("label");u.style.display="flex",u.style.alignItems="center",u.style.gap="10px",u.style.padding="6px 0",u.style.borderBottom="1px solid rgba(255, 255, 255, 0.08)",u.style.cursor="pointer",u.style.margin="0",d.appendChild(u);const p=document.createElement("input");p.type="checkbox",p.title=y("dialogs.selectDlc.selectAll"),p.style.transform="scale(1.1)",p.style.cursor="pointer",p.dataset.role="master",u.appendChild(p);const m=document.createElement("div");m.textContent=y("dialogs.selectDlc.selectAll"),m.style.fontWeight="600",u.appendChild(m);const f=()=>{if(!c.length)return p.checked=!1,p.indeterminate=!1,void(p.disabled=!0);p.disabled=!1;const e=c.every(e=>e.checked),t=c.some(e=>e.checked);p.checked=e,p.indeterminate=!e&&t};n.forEach((e,t)=>{const a=document.createElement("label");a.dataset.appid=e.appid,a.style.display="flex",a.style.alignItems="center",a.style.gap="10px",a.style.padding="6px 0",a.style.borderBottom="1px solid rgba(255, 255, 255, 0.08)";const o=document.createElement("input");o.type="checkbox",o.value=e.appid,o.dataset.role="dlc",c.push(o);const r=document.createElement("div");r.textContent=e.name&&e.name.trim().length?e.name:y("labels.dlcWithId",{id:e.appid}),e.alreadyInstalled&&(o.checked=i||!1),a.appendChild(o),a.appendChild(r),d.appendChild(a),o.addEventListener("change",()=>{f()}),t===n.length-1&&(a.style.borderBottom="none")});const g=R(y("common.cancel"),"secondary"),v=R(y("dialogs.selectDlc.confirm"),"primary");let h=!1;const A=e=>{h||(h=!0,s(),t(e))},x=e=>{v.disabled=e,e?o.setAttribute("aria-busy","true"):o.removeAttribute("aria-busy")};v.addEventListener("click",async()=>{const t=c.filter(e=>e.checked).map(e=>e.value);x(!0);const i=V("preparing");try{i.setStatus("downloading");const n=await b({appid:e,dlcs:t,mirror:a}),o=Q(n);o.success?(i.setStatus("merging"),i.close("success",600),A(!0)):(i.close("failure",1200),x(!1),await K(y("alerts.addingFailedTitle"),o.details||y("errors.failedAddSelectedDlc")))}catch(e){i.close("failure",1200),x(!1),await K(y("alerts.addingFailedTitle"),y("common.errorWithMessage",{message:e instanceof Error?e.message:String(e)}))}}),g.addEventListener("click",()=>A(!1)),l.appendChild(g),l.appendChild(v),o.addEventListener("keydown",e=>{"Escape"===e.key&&(e.preventDefault(),A(!1))}),p.addEventListener("change",()=>{c.length&&(c.forEach(e=>{e.checked=p.checked}),f())}),f()})})(e,t,i,o);r?await ne(y("messages.changesApplied"),a):await a()})(i,o.dlc,t,a,n):n?(await K(y("alerts.noDlcTitle"),y("messages.noDlcDetails")),ie(r,n)):await(async(e,t,a,i,n)=>{if(!await(async()=>O({title:y("dialogs.baseInstall.title"),message:y("dialogs.baseInstall.message"),confirmLabel:y("dialogs.baseInstall.confirm"),cancelLabel:y("common.cancel")}))())return void ie(t,a);t.innerHTML=ae("ADDING");const o=V("preparing");try{o.setStatus("downloading");const r=await b({appid:e,dlcs:[],mirror:n}),l=Q(r);l.success?(o.setStatus("merging"),o.close("success",600),await T(600),await ne(y("messages.gameAdded"),i)):(o.close("failure",1200),await K(y("alerts.unableAddTitle"),l.details||y("errors.failedInstallBaseGame")),ie(t,a))}catch(e){const i=e instanceof Error?e.message:String(e);o.close("failure",1200),await K(y("alerts.unableAddTitle"),y("common.errorWithMessage",{message:i})),ie(t,a)}})(i,r,n,t,a)}catch(e){await(async(e,t,a)=>{const i=e instanceof Error?e.message:String(e);await K(y("alerts.unableGetDlcTitle"),y("common.errorWithMessage",{message:i})),ie(t,a)})(e,r,n)}finally{w=!1}}});const s=a.lastElementChild;s?(a.insertBefore(o,s),l&&a.insertBefore(l,s),a.insertBefore(r,s)):(a.appendChild(o),l&&a.appendChild(l),a.appendChild(r))}catch{setTimeout(t,1e3)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t,{once:!0}):t();const a=(e=>{let t=0,a=null;return(...i)=>{const n=Date.now(),o=n-t;o>=500?(t=n,e(...i)):a||(a=setTimeout(()=>{t=Date.now(),a=null,e(...i)},500-o))}})(()=>{!e()||document.getElementById(X)||document.getElementById(Z)||t()});new MutationObserver(a).observe(document.body,{childList:!0,subtree:!0})},Object.defineProperty(e,"__esModule",{value:!0}),e}({},window.MILLENNIUM_API);return e};function ExecutePluginModule(){let e=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName];e.OnPluginConfigChange=function(t,a,i){t in e.settingsStore&&(e.ignoreProxyFlag=!0,e.settingsStore[t]=i,e.ignoreProxyFlag=!1)},MILLENNIUM_BACKEND_IPC.postMessage(0,{pluginName:pluginName,methodName:"__builtins__.__millennium_plugin_settings_parser__"}).then(async t=>{"string"==typeof t.returnValue&&(e.ignoreProxyFlag=!0,e.settingsStore=e.DefinePluginSetting(Object.fromEntries(JSON.parse(atob(t.returnValue)).map(e=>[e.functionName,e]))),e.ignoreProxyFlag=!1);let a=PluginEntryPointMain();Object.assign(window.PLUGIN_LIST[pluginName],{...a,__millennium_internal_plugin_name_do_not_use_or_change__:pluginName});let i=await a.default();var n;i&&(n=i)&&void 0!==n.title&&void 0!==n.icon&&void 0!==n.content?window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS[pluginName]=i:console.warn(`Plugin ${pluginName} does not contain proper SidebarNavigation props and therefor can't be mounted by Millennium. Please ensure it has a title, icon, and content.`)})}ExecutePluginModule();